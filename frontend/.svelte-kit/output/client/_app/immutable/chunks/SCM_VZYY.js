import{f as y,a as u,c as X}from"./DpXxpRXC.js";import{o as re}from"./brwGxWwK.js";import{H as se,I as ie,J as le,K as q,p as Y,e as M,t as H,a as Z,d,r as i,f as $,g as s,i as J,L as de}from"./OLrnjfeW.js";import{d as ee,s as I}from"./D0M6toz8.js";import{B as ne,p as ae,i as T,a as ce,s as ve}from"./CkCyRFQt.js";import{A as fe,B as ue,p as P,k as Q,j as U,l as V,r as me,C as _e}from"./DDc5wW8a.js";function K(r,e,...n){var b=new ne(r);se(()=>{const _=e()??null;b.ensure(_,_&&(l=>_(l,...n)))},ie)}const L=q([]),R=q([]),W=q(!1);le(L,r=>{const e={};for(const n of r)e[n.provider]||(e[n.provider]=[]),e[n.provider].push(n);return e});async function he(){W.set(!0);try{const r=await fe();L.set(r)}catch{L.set([])}finally{W.set(!1)}}async function ge(){try{const r=await ue();if(r.selected_models)try{const e=JSON.parse(r.selected_models);Array.isArray(e)&&R.set(e)}catch{R.set([])}}catch{R.set([])}}async function Te(){await Promise.all([he(),ge()])}var ye=y('<div class="modal-footer"><!></div>'),be=y('<div><div><div class="modal-header"><div class="modal-title-group"><h2> </h2> <!></div> <button class="modal-close" aria-label="Close" data-testid="modal-close"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="modal-body"><!></div> <!></div></div>');function Le(r,e){Y(e,!0);let n=ae(e,"wide",3,!1);function b(o){o.key==="Escape"&&e.open&&e.onclose()}function _(o){o.target===o.currentTarget&&e.onclose()}re(()=>(document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)));var l=be();let w;l.__click=_;var x=d(l);let p;var C=d(x),h=d(C),A=d(h),N=d(A,!0);i(A);var j=M(A,2);{var a=o=>{var c=X(),g=$(c);K(g,()=>e.titleBadge),u(o,c)};T(j,o=>{e.titleBadge&&o(a)})}i(h);var t=M(h,2);t.__click=function(...o){var c;(c=e.onclose)==null||c.apply(this,o)},i(C);var f=M(C,2),k=d(f);K(k,()=>e.children),i(f);var O=M(f,2);{var S=o=>{var c=ye(),g=d(c);K(g,()=>e.footer),i(c),u(o,c)};T(O,o=>{e.footer&&o(S)})}i(x),i(l),H(()=>{P(l,"id",e.id),w=Q(l,1,"modal-overlay",null,w,{active:e.open}),p=Q(x,1,"modal",null,p,{"modal-wide":n()}),I(N,e.title)}),u(r,l),Z()}ee(["click"]);var ke=y('<div class="no-models">No models available. Configure API keys first.</div>'),Me=y("<h4> </h4>"),we=y('<label class="model-checkbox"><input/> <span class="model-name"> </span></label>'),xe=y('<div class="model-provider-group"><!> <div class="model-list"></div></div>'),pe=y('<div class="model-selection-container"><!></div>');function Ne(r,e){Y(e,!0);const n=()=>ve(L,"$availableModels",b),[b,_]=ce();let l=ae(e,"mode",3,"checkbox");const w=J(()=>e.filterProvider?n().filter(a=>a.provider===e.filterProvider):n()),x=J(()=>()=>{const a={};for(const t of s(w))a[t.provider]||(a[t.provider]=[]),a[t.provider].push(t);return a});function p(a,t){return e.selectedModels.some(f=>f.provider===a&&f.modelId===t)}function C(a,t,f){l()==="radio"?e.onchange([{provider:a,modelId:t}]):f?p(a,t)||e.onchange([...e.selectedModels,{provider:a,modelId:t}]):e.onchange(e.selectedModels.filter(k=>!(k.provider===a&&k.modelId===t)))}var h=pe(),A=d(h);{var N=a=>{var t=ke();u(a,t)},j=a=>{var t=X(),f=$(t);U(f,17,()=>Object.entries(s(x)()),V,(k,O)=>{var S=J(()=>de(s(O),2));let o=()=>s(S)[0],c=()=>s(S)[1];var g=xe(),z=d(g);{var te=B=>{var v=Me(),E=d(v,!0);i(v),H(()=>I(E,o())),u(B,v)};T(z,B=>{e.filterProvider||B(te)})}var D=M(z,2);U(D,21,c,V,(B,v)=>{var E=we(),m=d(E);me(m),m.__change=F=>C(s(v).provider,s(v).id,F.target.checked);var G=M(m,2),oe=d(G,!0);i(G),i(E),H(F=>{P(m,"type",l()),P(m,"name",l()==="radio"?"model-selection":void 0),_e(m,F),P(m,"data-provider",s(v).provider),P(m,"data-model-id",s(v).id),I(oe,s(v).name)},[()=>p(s(v).provider,s(v).id)]),u(B,E)}),i(D),i(g),u(k,g)}),u(a,t)};T(A,a=>{s(w).length===0?a(N):a(j,!1)})}i(h),u(r,h),Z(),_()}ee(["change"]);export{Le as M,Ne as a,L as b,K as c,Te as i,he as l,R as s};
