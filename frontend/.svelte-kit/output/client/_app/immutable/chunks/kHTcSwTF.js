var q=Object.defineProperty;var B=t=>{throw TypeError(t)};var Q=(t,e,s)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var U=(t,e,s)=>Q(t,typeof e!="symbol"?e+"":e,s),Y=(t,e,s)=>e.has(t)||B("Cannot "+s);var r=(t,e,s)=>(Y(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),k=(t,e,s,a)=>(Y(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s);import{m as x,M as V,N as O,O as W,P as F,Q as $,G as D,R as X,S as J,T as K,H as ee,U as te,I as se,V as ae,W as re,X as ie,Y as ne,Z as C,_ as z,$ as fe,a0 as ue,a1 as ce,h as I,x as de,A as G,a2 as oe,e as le,a3 as he,a4 as _e,a5 as ve,j as be,a6 as ge,z as Se,a7 as pe,a8 as me,a9 as Pe,aa as Ae,ab as Ee,F as Te,ac as Ie,ad as Re,ae as ye,af as Oe}from"./J2kTv08O.js";var l,h,o,b,P,A,R;class De{constructor(e,s=!0){U(this,"anchor");v(this,l,new Map);v(this,h,new Map);v(this,o,new Map);v(this,b,new Set);v(this,P,!0);v(this,A,()=>{var e=x;if(r(this,l).has(e)){var s=r(this,l).get(e),a=r(this,h).get(s);if(a)V(a),r(this,b).delete(s);else{var n=r(this,o).get(s);n&&(r(this,h).set(s,n.effect),r(this,o).delete(s),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),a=n.effect)}for(const[i,u]of r(this,l)){if(r(this,l).delete(i),i===e)break;const f=r(this,o).get(u);f&&(O(f.effect),r(this,o).delete(u))}for(const[i,u]of r(this,h)){if(i===s||r(this,b).has(i))continue;const f=()=>{if(Array.from(r(this,l).values()).includes(i)){var _=document.createDocumentFragment();J(u,_),_.append(F()),r(this,o).set(i,{effect:u,fragment:_})}else O(u);r(this,b).delete(i),r(this,h).delete(i)};r(this,P)||!a?(r(this,b).add(i),W(u,f,!1)):f()}}});v(this,R,e=>{r(this,l).delete(e);const s=Array.from(r(this,l).values());for(const[a,n]of r(this,o))s.includes(a)||(O(n.effect),r(this,o).delete(a))});this.anchor=e,k(this,P,s)}ensure(e,s){var a=x,n=K();if(s&&!r(this,h).has(e)&&!r(this,o).has(e))if(n){var i=document.createDocumentFragment(),u=F();i.append(u),r(this,o).set(e,{effect:$(()=>s(u)),fragment:i})}else r(this,h).set(e,$(()=>s(this.anchor)));if(r(this,l).set(a,e),n){for(const[f,c]of r(this,h))f===e?a.skipped_effects.delete(c):a.skipped_effects.add(c);for(const[f,c]of r(this,o))f===e?a.skipped_effects.delete(c.effect):a.skipped_effects.add(c.effect);a.oncommit(r(this,A)),a.ondiscard(r(this,R))}else D&&(this.anchor=X),r(this,A).call(this)}}l=new WeakMap,h=new WeakMap,o=new WeakMap,b=new WeakMap,P=new WeakMap,A=new WeakMap,R=new WeakMap;function Le(t,e,s=!1){D&&te();var a=new De(t),n=s?se:0;function i(u,f){if(D){const _=ae(t)===re;if(u===_){var c=ie();ne(c),a.anchor=c,C(!1),a.ensure(u,f),C(!0);return}}a.ensure(u,f)}ee(()=>{var u=!1;e((f,c=!0)=>{u=!0,i(c,f)}),u||i(!1,null)},n)}let T=!1,M=Symbol();function Be(t,e,s){const a=s[e]??(s[e]={store:null,source:fe(void 0),unsubscribe:z});if(a.store!==t&&!(M in s))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=z;else{var n=!0;a.unsubscribe=ue(t,i=>{n?a.source.v=i:G(a.source,i)}),n=!1}return t&&M in s?ce(t):I(a.source)}function Ue(){const t={};function e(){de(()=>{for(var s in t)t[s].unsubscribe();oe(t,M,{enumerable:!1,value:!0})})}return[t,e]}function Me(t){var e=T;try{return T=!1,[t(),T]}finally{T=e}}function Ye(t,e,s,a){var w;var n=!Te||(s&Ie)!==0,i=(s&Ee)!==0,u=(s&Ae)!==0,f=a,c=!0,_=()=>(c&&(c=!1,f=u?le(a):a),f),S;if(i){var H=ye in t||Oe in t;S=((w=he(t,e))==null?void 0:w.set)??(H&&e in t?d=>t[e]=d:void 0)}var p,N=!1;i?[p,N]=Me(()=>t[e]):p=t[e],p===void 0&&a!==void 0&&(p=_(),S&&(n&&_e(),S(p)));var g;if(n?g=()=>{var d=t[e];return d===void 0?_():(c=!0,d)}:g=()=>{var d=t[e];return d!==void 0&&(f=void 0),d===void 0?f:d},n&&(s&ve)===0)return g;if(S){var Z=t.$$legacy;return(function(d,E){return arguments.length>0?((!n||!E||Z||N)&&S(E?g():d),d):g()})}var y=!1,m=((s&Re)!==0?be:ge)(()=>(y=!1,g()));i&&I(m);var j=me;return(function(d,E){if(arguments.length>0){const L=E?I(m):n&&i?Se(d):d;return G(m,L),y=!0,f!==void 0&&(f=L),d}return pe&&y||(j.f&Pe)!==0?m.v:I(m)})}export{De as B,Ue as a,Le as i,Ye as p,Be as s};
