import{Q as z,H as Ne,Z as B,G as _,ag as Ce,V as Ie,h as ue,a6 as Ae,W as Oe,X as $e,Y as le,_ as K,S as F,ar as Le,aS as Me,aD as de,m as R,aW as E,R as Z,U as Re,an as pe,a0 as De,aQ as ee,q as Ve,aX as ke,aY as xe,aZ as Ge,N as we,P as _e,a_ as Q,aM as He,aP as Je,O as Fe,aq as ye,a$ as Ee,b0 as Ue,b1 as qe,b2 as Ye,b3 as ze,b4 as Be,b5 as Ke,l as Qe,aV as We,e as Xe,ao as Ze,o as je,K as C,J as er,L as D}from"./Oh1DGDXX.js";function _r(e,r){return r}function rr(e,r,t){for(var a=[],s=r.length,n,o=r.length,c=0;c<s;c++){let S=r[c];_e(S,()=>{if(n){if(n.pending.delete(S),n.done.add(S),n.pending.size===0){var v=e.outrogroups;j(ee(n.done)),v.delete(n),v.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var f=a.length===0&&t!==null;if(f){var d=t,u=d.parentNode;Je(u),u.append(d),e.items.clear()}j(r,!f)}else n={pending:new Set(r),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(n)}function j(e,r=!0){for(var t=0;t<e.length;t++)Fe(e[t],r)}var ve;function yr(e,r,t,a,s,n=null){var o=e,c=new Map,f=(r&Ee)!==0;if(f){var d=e;o=_?B(Ce(d)):d.appendChild(z())}_&&Ie();var u=null,S=Ae(()=>{var l=t();return Ve(l)?l:l==null?[]:ee(l)}),v,m=!0;function P(){i.fallback=u,tr(i,v,o,r,a),u!==null&&(v.length===0?(u.f&E)===0?we(u):(u.f^=E,x(u,null,o)):_e(u,()=>{u=null}))}var A=Ne(()=>{v=ue(S);var l=v.length;let O=!1;if(_){var $=Oe(o)===$e;$!==(l===0)&&(o=le(),B(o),K(!1),O=!0)}for(var w=new Set,b=R,L=Re(),h=0;h<l;h+=1){_&&F.nodeType===Le&&F.data===Me&&(o=F,O=!0,K(!1));var N=v[h],M=a(N,h),g=m?null:c.get(M);g?(g.v&&de(g.v,N),g.i&&de(g.i,h),L&&b.skipped_effects.delete(g.e)):(g=ar(c,m?o:ve??(ve=z()),N,M,h,s,r,t),m||(g.e.f|=E),c.set(M,g)),w.add(M)}if(l===0&&n&&!u&&(m?u=Z(()=>n(o)):(u=Z(()=>n(ve??(ve=z()))),u.f|=E)),_&&l>0&&B(le()),!m)if(L){for(const[H,J]of c)w.has(H)||b.skipped_effects.add(J.e);b.oncommit(P),b.ondiscard(()=>{})}else P();O&&K(!0),ue(S)}),i={effect:A,items:c,outrogroups:null,fallback:u};m=!1,_&&(o=F)}function tr(e,r,t,a,s){var g,H,J,ae,se,ne,oe,ie,fe;var n=(a&Ue)!==0,o=r.length,c=e.items,f=e.effect.first,d,u=null,S,v=[],m=[],P,A,i,l;if(n)for(l=0;l<o;l+=1)P=r[l],A=s(P,l),i=c.get(A).e,(i.f&E)===0&&((H=(g=i.nodes)==null?void 0:g.a)==null||H.measure(),(S??(S=new Set)).add(i));for(l=0;l<o;l+=1){if(P=r[l],A=s(P,l),i=c.get(A).e,e.outrogroups!==null)for(const y of e.outrogroups)y.pending.delete(i),y.done.delete(i);if((i.f&E)!==0)if(i.f^=E,i===f)x(i,null,t);else{var O=u?u.next:f;i===e.effect.last&&(e.effect.last=i.prev),i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),T(e,u,i),T(e,i,O),x(i,O,t),u=i,v=[],m=[],f=u.next;continue}if((i.f&Q)!==0&&(we(i),n&&((ae=(J=i.nodes)==null?void 0:J.a)==null||ae.unfix(),(S??(S=new Set)).delete(i))),i!==f){if(d!==void 0&&d.has(i)){if(v.length<m.length){var $=m[0],w;u=$.prev;var b=v[0],L=v[v.length-1];for(w=0;w<v.length;w+=1)x(v[w],$,t);for(w=0;w<m.length;w+=1)d.delete(m[w]);T(e,b.prev,L.next),T(e,u,b),T(e,L,$),f=$,u=L,l-=1,v=[],m=[]}else d.delete(i),x(i,f,t),T(e,i.prev,i.next),T(e,i,u===null?e.effect.first:u.next),T(e,u,i),u=i;continue}for(v=[],m=[];f!==null&&f!==i;)(d??(d=new Set)).add(f),m.push(f),f=f.next;if(f===null)continue}(i.f&E)===0&&v.push(i),u=i,f=i.next}if(e.outrogroups!==null){for(const y of e.outrogroups)y.pending.size===0&&(j(ee(y.done)),(se=e.outrogroups)==null||se.delete(y));e.outrogroups.size===0&&(e.outrogroups=null)}if(f!==null||d!==void 0){var h=[];if(d!==void 0)for(i of d)(i.f&Q)===0&&h.push(i);for(;f!==null;)(f.f&Q)===0&&f!==e.fallback&&h.push(f),f=f.next;var N=h.length;if(N>0){var M=(a&Ee)!==0&&o===0?t:null;if(n){for(l=0;l<N;l+=1)(oe=(ne=h[l].nodes)==null?void 0:ne.a)==null||oe.measure();for(l=0;l<N;l+=1)(fe=(ie=h[l].nodes)==null?void 0:ie.a)==null||fe.fix()}rr(e,h,M)}}n&&ye(()=>{var y,ce;if(S!==void 0)for(i of S)(ce=(y=i.nodes)==null?void 0:y.a)==null||ce.apply()})}function ar(e,r,t,a,s,n,o,c){var f=(o&ke)!==0?(o&xe)===0?De(t,!1,!1):pe(t):null,d=(o&Ge)!==0?pe(s):null;return{v:f,i:d,e:Z(()=>(n(r,f??t,d??s,c),()=>{e.delete(a)}))}}function x(e,r,t){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end,n=r&&(r.f&E)===0?r.nodes.start:t;a!==null;){var o=He(a);if(n.before(a),a===s)return;a=o}}function T(e,r,t){r===null?e.effect.first=t:r.next=t,t===null?e.effect.last=r:t.prev=r}const me=[...` 	
\r\fÂ \v\uFEFF`];function sr(e,r,t){var a=e==null?"":""+e;if(r&&(a=a?a+" "+r:r),t){for(var s in t)if(t[s])a=a?a+" "+s:s;else if(a.length)for(var n=s.length,o=0;(o=a.indexOf(s,o))>=0;){var c=o+n;(o===0||me.includes(a[o-1]))&&(c===a.length||me.includes(a[c]))?a=(o===0?"":a.substring(0,o))+a.substring(c+1):o=c}}return a===""?null:a}function Er(e,r){return e==null?null:String(e)}function Tr(e,r,t,a,s,n){var o=e.__className;if(_||o!==t||o===void 0){var c=sr(t,a,n);(!_||c!==e.getAttribute("class"))&&(c==null?e.removeAttribute("class"):e.className=c),e.__className=t}else if(n&&s!==n)for(var f in n){var d=!!n[f];(s==null||d!==!!s[f])&&e.classList.toggle(f,d)}return n}const nr=Symbol("is custom element"),or=Symbol("is html");function Pr(e){if(_){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var a=e.value;he(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var s=e.checked;he(e,"checked",null),e.checked=s}}};e.__on_r=t,ye(t),qe()}}function br(e,r){var t=re(e);t.value===(t.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Nr(e,r){var t=re(e);t.checked!==(t.checked=r??void 0)&&(e.checked=r)}function he(e,r,t,a){var s=re(e);_&&(s[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||s[r]!==(s[r]=t)&&(r==="loading"&&(e[ze]=t),t==null?e.removeAttribute(r):typeof t!="string"&&ir(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function re(e){return e.__attributes??(e.__attributes={[nr]:e.nodeName.includes("-"),[or]:e.namespaceURI===Ye})}var ge=new Map;function ir(e){var r=e.getAttribute("is")||e.nodeName,t=ge.get(r);if(t)return t;ge.set(r,t=[]);for(var a,s=e,n=Element.prototype;n!==s;){a=Ke(s);for(var o in a)a[o].set&&t.push(o);s=Be(s)}return t}function Cr(e,r,t=r){var a=new WeakSet;Qe(e,"input",async s=>{var n=s?e.defaultValue:e.value;if(n=W(e)?X(n):n,t(n),R!==null&&a.add(R),await We(),n!==(n=r())){var o=e.selectionStart,c=e.selectionEnd,f=e.value.length;if(e.value=n??"",c!==null){var d=e.value.length;o===c&&c===f&&d>f?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=o,e.selectionEnd=Math.min(c,d))}}}),(_&&e.defaultValue!==e.value||Xe(r)==null&&e.value)&&(t(W(e)?X(e.value):e.value),R!==null&&a.add(R)),Ze(()=>{var s=r();if(e===document.activeElement){var n=je??R;if(a.has(n))return}W(e)&&s===X(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function W(e){var r=e.type;return r==="number"||r==="range"}function X(e){return e===""?null:+e}const fr="";async function p(e,r){const t=await fetch(`${fr}${e}`,{...r,headers:{"Content-Type":"application/json",...r==null?void 0:r.headers}});if(!t.ok){const a=await t.json().catch(()=>({}));throw new Error(a.error||`Request failed: ${t.status}`)}return t.json()}async function cr(){return p("/api/prompts")}async function ur(e){return p(`/api/prompts/${e}`)}async function lr(e){return p(`/api/prompts/${e}/versions`)}async function Te(e){return p("/api/prompts",{method:"POST",body:JSON.stringify(e)})}async function dr(e){await p(`/api/prompts/${e}`,{method:"DELETE"})}async function pr(e){await p(`/api/prompts/${e}/all-versions`,{method:"DELETE"})}async function Ir(){return p("/api/prompts/export")}async function Ar(e){return p("/api/prompts/import",{method:"POST",body:JSON.stringify(e)})}async function Or(){return p("/api/models")}async function $r(){return p("/api/config")}async function vr(e){await p("/api/config",{method:"POST",body:JSON.stringify(e)})}async function Lr(e){await vr({selected_models:JSON.stringify(e)})}async function Mr(e){return p(`/api/prompts/${e}/test-cases`)}async function Rr(e,r){return p(`/api/prompts/${e}/test-cases`,{method:"POST",body:JSON.stringify(r)})}async function Dr(e,r){return p(`/api/test-cases/${e}`,{method:"PUT",body:JSON.stringify(r)})}async function Vr(e){await p(`/api/test-cases/${e}`,{method:"DELETE"})}async function kr(e){return p(`/api/prompts/${e}/test-cases/export`)}async function xr(e,r){return p(`/api/prompts/${e}/test-cases/import`,{method:"POST",body:JSON.stringify(r)})}async function Gr(e){return p(`/api/prompts/${e}/test-jobs`)}async function Hr(e){return p("/api/test/run",{method:"POST",body:JSON.stringify(e)})}async function Jr(e){return p(`/api/test/status/${e}`)}let mr=0;function hr(){const{subscribe:e,update:r}=C([]);return{subscribe:e,show(t,a="info",s=5e3){const n=++mr;return r(o=>[...o,{id:n,text:t,type:a}]),setTimeout(()=>{r(o=>o.filter(c=>c.id!==n))},s),n},dismiss(t){r(a=>a.filter(s=>s.id!==t))},clear(){r(()=>[])}}}const te=hr();function U(e){return te.show(e,"success")}function I(e){return te.show(e,"error")}function Fr(e){return te.show(e,"info")}const Pe=C([]),G=C(null),V=C(new Set),k=C({}),gr=C(""),Se=C(!1),Ur=er([Pe,gr],([e,r])=>{const t=r.trim().toLowerCase();return t?e.filter(a=>a.name.toLowerCase().includes(t)):e});async function q(){Se.set(!0);try{const e=await cr();Pe.set(e);const r=D(G);r&&V.update(t=>(t.add(r.promptGroupId),t))}catch{I("Error loading prompts")}finally{Se.set(!1)}}async function Sr(e,r){try{const t=await lr(r);return k.update(a=>({...a,[e]:t})),t}catch{return I("Error loading prompt versions"),[]}}async function Y(e){try{const r=await ur(e);G.set(r),sessionStorage.setItem("selectedPromptId",e.toString());const t=new URL(window.location.href);t.searchParams.set("promptId",e.toString()),window.history.replaceState({},"",t.toString()),V.update(a=>(a.add(r.promptGroupId),a))}catch{I("Error loading prompt")}}function be(){G.set(null),sessionStorage.removeItem("selectedPromptId");const e=new URL(window.location.href);e.searchParams.delete("promptId"),window.history.replaceState({},"",e.toString())}async function qr(e,r){if(D(V).has(e))V.update(s=>(s.delete(e),new Set(s)));else{V.set(new Set([e])),D(k)[e]||await Sr(e,r);const n=D(k)[e];n&&n.length>0&&await Y(n[0].id)}}async function Yr(e){try{const r=await Te(e);return await q(),await Y(r.id),U("Prompt created successfully!"),r}catch(r){return I(r.message||"Failed to create prompt"),null}}async function zr(e,r,t,a){try{const s=await Te({name:r,content:t,expectedSchema:a,parentVersionId:e});return k.update(n=>{const o={...n};return delete o[s.promptGroupId],o}),await q(),await Y(s.id),U("New version saved!"),s}catch(s){return I(s.message||"Failed to save prompt"),null}}async function Br(e,r){try{await dr(e),U("Version deleted");const t=D(G);return(t==null?void 0:t.id)===e&&be(),k.update(a=>{const s={...a};return delete s[r],s}),await q(),!0}catch(t){return I(t.message||"Failed to delete version"),!1}}async function Kr(e,r){try{await pr(e),U("Prompt deleted");const t=D(G);return(t==null?void 0:t.promptGroupId)===r&&be(),k.update(a=>{const s={...a};return delete s[r],s}),V.update(a=>(a.delete(r),new Set(a))),await q(),!0}catch(t){return I(t.message||"Failed to delete prompt"),!1}}async function Qr(){const r=new URLSearchParams(window.location.search).get("promptId"),t=sessionStorage.getItem("selectedPromptId"),a=r||t;if(a){const s=parseInt(a,10);isNaN(s)||await Y(s)}}function Wr(e){const r=new Date(e),t=String(r.getFullYear()).slice(-2),a=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),n=String(r.getHours()).padStart(2,"0"),o=String(r.getMinutes()).padStart(2,"0"),c=String(r.getSeconds()).padStart(2,"0");return`${t}.${a}.${s} - ${n}:${o}:${c}`}export{Kr as A,V as B,k as C,Wr as D,Y as E,Br as F,gr as G,be as H,Ir as I,Ar as J,q as K,br as L,Se as M,Ur as N,ur as O,Yr as P,zr as Q,te as R,Qr as S,I as a,G as b,U as c,Cr as d,kr as e,he as f,Mr as g,Rr as h,xr as i,Vr as j,yr as k,Gr as l,_r as m,Fr as n,Hr as o,Jr as p,Or as q,Pr as r,Tr as s,Er as t,Dr as u,Lr as v,$r as w,Nr as x,vr as y,qr as z};
