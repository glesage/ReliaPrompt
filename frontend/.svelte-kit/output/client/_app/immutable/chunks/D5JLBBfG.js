import{f as g,a as u,c as X}from"./DpXxpRXC.js";import{o as re}from"./brwGxWwK.js";import{H as se,I as ie,J as le,K as I,p as Y,e as M,t as R,a as Z,d as i,r as s,f as $,g as c,i as F,L as de}from"./OLrnjfeW.js";import{d as ee,s as H}from"./D0M6toz8.js";import{B as ne,p as ae,i as S,a as ce,s as ve}from"./CkCyRFQt.js";import{A as fe,B as ue,k as G,j as Q,l as U,r as me,p as V,C as _e}from"./B7dw2RBZ.js";function J(r,e,...l){var y=new ne(r);se(()=>{const m=e()??null;y.ensure(m,m&&(d=>m(d,...l)))},ie)}const T=I([]),K=I([]),W=I(!1);le(T,r=>{const e={};for(const l of r)e[l.provider]||(e[l.provider]=[]),e[l.provider].push(l);return e});async function he(){W.set(!0);try{const r=await fe();T.set(r)}catch{T.set([])}finally{W.set(!1)}}async function ge(){try{const r=await ue();if(r.selected_models)try{const e=JSON.parse(r.selected_models);Array.isArray(e)&&K.set(e)}catch{K.set([])}}catch{K.set([])}}async function Te(){await Promise.all([he(),ge()])}var ye=g('<div class="modal-footer"><!></div>'),be=g('<div><div><div class="modal-header"><div class="modal-title-group"><h2> </h2> <!></div> <button class="modal-close" aria-label="Close"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="modal-body"><!></div> <!></div></div>');function Le(r,e){Y(e,!0);let l=ae(e,"wide",3,!1);function y(o){o.key==="Escape"&&e.open&&e.onclose()}function m(o){o.target===o.currentTarget&&e.onclose()}re(()=>(document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)));var d=be();let w;d.__click=m;var x=i(d);let p;var C=i(x),_=i(C),A=i(_),L=i(A,!0);s(A);var N=M(A,2);{var a=o=>{var n=X(),h=$(n);J(h,()=>e.titleBadge),u(o,n)};S(N,o=>{e.titleBadge&&o(a)})}s(_);var t=M(_,2);t.__click=function(...o){var n;(n=e.onclose)==null||n.apply(this,o)},s(C);var v=M(C,2),b=i(v);J(b,()=>e.children),s(v);var j=M(v,2);{var P=o=>{var n=ye(),h=i(n);J(h,()=>e.footer),s(n),u(o,n)};S(j,o=>{e.footer&&o(P)})}s(x),s(d),R(()=>{w=G(d,1,"modal-overlay",null,w,{active:e.open}),p=G(x,1,"modal",null,p,{"modal-wide":l()}),H(L,e.title)}),u(r,d),Z()}ee(["click"]);var ke=g('<div class="no-models">No models available. Configure API keys first.</div>'),Me=g("<h4> </h4>"),we=g('<label class="model-checkbox"><input/> <span class="model-name"> </span></label>'),xe=g('<div class="model-provider-group"><!> <div class="model-list"></div></div>'),pe=g('<div class="model-selection-container"><!></div>');function Ne(r,e){Y(e,!0);const l=()=>ve(T,"$availableModels",y),[y,m]=ce();let d=ae(e,"mode",3,"checkbox");const w=F(()=>e.filterProvider?l().filter(a=>a.provider===e.filterProvider):l()),x=F(()=>()=>{const a={};for(const t of c(w))a[t.provider]||(a[t.provider]=[]),a[t.provider].push(t);return a});function p(a,t){return e.selectedModels.some(v=>v.provider===a&&v.modelId===t)}function C(a,t,v){d()==="radio"?e.onchange([{provider:a,modelId:t}]):v?p(a,t)||e.onchange([...e.selectedModels,{provider:a,modelId:t}]):e.onchange(e.selectedModels.filter(b=>!(b.provider===a&&b.modelId===t)))}var _=pe(),A=i(_);{var L=a=>{var t=ke();u(a,t)},N=a=>{var t=X(),v=$(t);Q(v,17,()=>Object.entries(c(x)()),U,(b,j)=>{var P=F(()=>de(c(j),2));let o=()=>c(P)[0],n=()=>c(P)[1];var h=xe(),q=i(h);{var te=B=>{var f=Me(),E=i(f,!0);s(f),R(()=>H(E,o())),u(B,f)};S(q,B=>{e.filterProvider||B(te)})}var z=M(q,2);Q(z,21,n,U,(B,f)=>{var E=we(),k=i(E);me(k),k.__change=O=>C(c(f).provider,c(f).id,O.target.checked);var D=M(k,2),oe=i(D,!0);s(D),s(E),R(O=>{V(k,"type",d()),V(k,"name",d()==="radio"?"model-selection":void 0),_e(k,O),H(oe,c(f).name)},[()=>p(c(f).provider,c(f).id)]),u(B,E)}),s(z),s(h),u(b,h)}),u(a,t)};S(A,a=>{c(w).length===0?a(L):a(N,!1)})}s(_),u(r,_),Z(),m()}ee(["change"]);export{Le as M,Ne as a,T as b,J as c,Te as i,he as l,K as s};
