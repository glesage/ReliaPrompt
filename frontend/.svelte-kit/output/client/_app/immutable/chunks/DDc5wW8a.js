import{P as z,H as Ne,Y as B,F as w,ag as Ie,U as Oe,g as ue,a6 as Ae,V as Ce,W as $e,X as le,Z as W,R as H,ar as Me,aS as Le,aD as de,y as R,aW as E,Q as Z,T as Re,an as pe,$ as De,aQ as ee,B as Ve,aX as xe,aY as Je,aZ as ke,M as ye,O as we,a_ as K,aM as Fe,aP as Ge,N as He,aq as _e,a$ as Ee,b0 as Ue,b1 as qe,b2 as Ye,b3 as ze,b4 as Be,b5 as We,x as Ke,aV as Qe,l as Xe,ao as Ze,A as je,K as I,J as er,a1 as D}from"./OLrnjfeW.js";function yr(e,r){return r}function rr(e,r,t){for(var a=[],n=r.length,s,o=r.length,f=0;f<n;f++){let S=r[f];we(S,()=>{if(s){if(s.pending.delete(S),s.done.add(S),s.pending.size===0){var v=e.outrogroups;j(ee(s.done)),v.delete(s),v.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var c=a.length===0&&t!==null;if(c){var d=t,u=d.parentNode;Ge(u),u.append(d),e.items.clear()}j(r,!c)}else s={pending:new Set(r),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(s)}function j(e,r=!0){for(var t=0;t<e.length;t++)He(e[t],r)}var ve;function wr(e,r,t,a,n,s=null){var o=e,f=new Map,c=(r&Ee)!==0;if(c){var d=e;o=w?B(Ie(d)):d.appendChild(z())}w&&Oe();var u=null,S=Ae(()=>{var l=t();return Ve(l)?l:l==null?[]:ee(l)}),v,m=!0;function P(){i.fallback=u,tr(i,v,o,r,a),u!==null&&(v.length===0?(u.f&E)===0?ye(u):(u.f^=E,J(u,null,o)):we(u,()=>{u=null}))}var A=Ne(()=>{v=ue(S);var l=v.length;let C=!1;if(w){var $=Ce(o)===$e;$!==(l===0)&&(o=le(),B(o),W(!1),C=!0)}for(var y=new Set,b=R,M=Re(),g=0;g<l;g+=1){w&&H.nodeType===Me&&H.data===Le&&(o=H,C=!0,W(!1));var N=v[g],L=a(N,g),h=m?null:f.get(L);h?(h.v&&de(h.v,N),h.i&&de(h.i,g),M&&b.skipped_effects.delete(h.e)):(h=ar(f,m?o:ve??(ve=z()),N,L,g,n,r,t),m||(h.e.f|=E),f.set(L,h)),y.add(L)}if(l===0&&s&&!u&&(m?u=Z(()=>s(o)):(u=Z(()=>s(ve??(ve=z()))),u.f|=E)),w&&l>0&&B(le()),!m)if(M){for(const[F,G]of f)y.has(F)||b.skipped_effects.add(G.e);b.oncommit(P),b.ondiscard(()=>{})}else P();C&&W(!0),ue(S)}),i={effect:A,items:f,outrogroups:null,fallback:u};m=!1,w&&(o=H)}function tr(e,r,t,a,n){var h,F,G,ae,ne,se,oe,ie,ce;var s=(a&Ue)!==0,o=r.length,f=e.items,c=e.effect.first,d,u=null,S,v=[],m=[],P,A,i,l;if(s)for(l=0;l<o;l+=1)P=r[l],A=n(P,l),i=f.get(A).e,(i.f&E)===0&&((F=(h=i.nodes)==null?void 0:h.a)==null||F.measure(),(S??(S=new Set)).add(i));for(l=0;l<o;l+=1){if(P=r[l],A=n(P,l),i=f.get(A).e,e.outrogroups!==null)for(const _ of e.outrogroups)_.pending.delete(i),_.done.delete(i);if((i.f&E)!==0)if(i.f^=E,i===c)J(i,null,t);else{var C=u?u.next:c;i===e.effect.last&&(e.effect.last=i.prev),i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),T(e,u,i),T(e,i,C),J(i,C,t),u=i,v=[],m=[],c=u.next;continue}if((i.f&K)!==0&&(ye(i),s&&((ae=(G=i.nodes)==null?void 0:G.a)==null||ae.unfix(),(S??(S=new Set)).delete(i))),i!==c){if(d!==void 0&&d.has(i)){if(v.length<m.length){var $=m[0],y;u=$.prev;var b=v[0],M=v[v.length-1];for(y=0;y<v.length;y+=1)J(v[y],$,t);for(y=0;y<m.length;y+=1)d.delete(m[y]);T(e,b.prev,M.next),T(e,u,b),T(e,M,$),c=$,u=M,l-=1,v=[],m=[]}else d.delete(i),J(i,c,t),T(e,i.prev,i.next),T(e,i,u===null?e.effect.first:u.next),T(e,u,i),u=i;continue}for(v=[],m=[];c!==null&&c!==i;)(d??(d=new Set)).add(c),m.push(c),c=c.next;if(c===null)continue}(i.f&E)===0&&v.push(i),u=i,c=i.next}if(e.outrogroups!==null){for(const _ of e.outrogroups)_.pending.size===0&&(j(ee(_.done)),(ne=e.outrogroups)==null||ne.delete(_));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||d!==void 0){var g=[];if(d!==void 0)for(i of d)(i.f&K)===0&&g.push(i);for(;c!==null;)(c.f&K)===0&&c!==e.fallback&&g.push(c),c=c.next;var N=g.length;if(N>0){var L=(a&Ee)!==0&&o===0?t:null;if(s){for(l=0;l<N;l+=1)(oe=(se=g[l].nodes)==null?void 0:se.a)==null||oe.measure();for(l=0;l<N;l+=1)(ce=(ie=g[l].nodes)==null?void 0:ie.a)==null||ce.fix()}rr(e,g,L)}}s&&_e(()=>{var _,fe;if(S!==void 0)for(i of S)(fe=(_=i.nodes)==null?void 0:_.a)==null||fe.apply()})}function ar(e,r,t,a,n,s,o,f){var c=(o&xe)!==0?(o&Je)===0?De(t,!1,!1):pe(t):null,d=(o&ke)!==0?pe(n):null;return{v:c,i:d,e:Z(()=>(s(r,c??t,d??n,f),()=>{e.delete(a)}))}}function J(e,r,t){if(e.nodes)for(var a=e.nodes.start,n=e.nodes.end,s=r&&(r.f&E)===0?r.nodes.start:t;a!==null;){var o=Fe(a);if(s.before(a),a===n)return;a=o}}function T(e,r,t){r===null?e.effect.first=t:r.next=t,t===null?e.effect.last=r:t.prev=r}const me=[...` 	
\r\fÂ \v\uFEFF`];function nr(e,r,t){var a=e==null?"":""+e;if(r&&(a=a?a+" "+r:r),t){for(var n in t)if(t[n])a=a?a+" "+n:n;else if(a.length)for(var s=n.length,o=0;(o=a.indexOf(n,o))>=0;){var f=o+s;(o===0||me.includes(a[o-1]))&&(f===a.length||me.includes(a[f]))?a=(o===0?"":a.substring(0,o))+a.substring(f+1):o=f}}return a===""?null:a}function _r(e,r){return e==null?null:String(e)}function Er(e,r,t,a,n,s){var o=e.__className;if(w||o!==t||o===void 0){var f=nr(t,a,s);(!w||f!==e.getAttribute("class"))&&(f==null?e.removeAttribute("class"):e.className=f),e.__className=t}else if(s&&n!==s)for(var c in s){var d=!!s[c];(n==null||d!==!!n[c])&&e.classList.toggle(c,d)}return s}const sr=Symbol("is custom element"),or=Symbol("is html");function Tr(e){if(w){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var a=e.value;ge(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var n=e.checked;ge(e,"checked",null),e.checked=n}}};e.__on_r=t,_e(t),qe()}}function Pr(e,r){var t=re(e);t.value===(t.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function br(e,r){var t=re(e);t.checked!==(t.checked=r??void 0)&&(e.checked=r)}function ge(e,r,t,a){var n=re(e);w&&(n[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||n[r]!==(n[r]=t)&&(r==="loading"&&(e[ze]=t),t==null?e.removeAttribute(r):typeof t!="string"&&ir(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function re(e){return e.__attributes??(e.__attributes={[sr]:e.nodeName.includes("-"),[or]:e.namespaceURI===Ye})}var he=new Map;function ir(e){var r=e.getAttribute("is")||e.nodeName,t=he.get(r);if(t)return t;he.set(r,t=[]);for(var a,n=e,s=Element.prototype;s!==n;){a=We(n);for(var o in a)a[o].set&&t.push(o);n=Be(n)}return t}function Nr(e,r,t=r){var a=new WeakSet;Ke(e,"input",async n=>{var s=n?e.defaultValue:e.value;if(s=Q(e)?X(s):s,t(s),R!==null&&a.add(R),await Qe(),s!==(s=r())){var o=e.selectionStart,f=e.selectionEnd,c=e.value.length;if(e.value=s??"",f!==null){var d=e.value.length;o===f&&f===c&&d>c?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=o,e.selectionEnd=Math.min(f,d))}}}),(w&&e.defaultValue!==e.value||Xe(r)==null&&e.value)&&(t(Q(e)?X(e.value):e.value),R!==null&&a.add(R)),Ze(()=>{var n=r();if(e===document.activeElement){var s=je??R;if(a.has(s))return}Q(e)&&n===X(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Q(e){var r=e.type;return r==="number"||r==="range"}function X(e){return e===""?null:+e}const cr="";async function p(e,r){const t=await fetch(`${cr}${e}`,{...r,headers:{"Content-Type":"application/json",...r==null?void 0:r.headers}});if(!t.ok){const a=await t.json().catch(()=>({}));throw new Error(a.error||`Request failed: ${t.status}`)}return t.json()}async function fr(){return p("/api/prompts")}async function ur(e){return p(`/api/prompts/${e}`)}async function lr(e){return p(`/api/prompts/${e}/versions`)}async function Te(e){return p("/api/prompts",{method:"POST",body:JSON.stringify(e)})}async function dr(e){await p(`/api/prompts/${e}`,{method:"DELETE"})}async function pr(e){await p(`/api/prompts/${e}/all-versions`,{method:"DELETE"})}async function Ir(){return p("/api/prompts/export")}async function Or(e){return p("/api/prompts/import",{method:"POST",body:JSON.stringify(e)})}async function Ar(){return p("/api/models")}async function Cr(){return p("/api/config")}async function $r(e){await p("/api/config",{method:"POST",body:JSON.stringify(e)})}async function Mr(){return p("/api/config/improvement-prompt")}async function Lr(e){await p("/api/config/improvement-prompt",{method:"PUT",body:JSON.stringify({template:e})})}async function Rr(e){return p(`/api/prompts/${e}/test-cases`)}async function Dr(e,r){return p(`/api/prompts/${e}/test-cases`,{method:"POST",body:JSON.stringify(r)})}async function Vr(e,r){return p(`/api/test-cases/${e}`,{method:"PUT",body:JSON.stringify(r)})}async function xr(e){await p(`/api/test-cases/${e}`,{method:"DELETE"})}async function Jr(e){return p(`/api/prompts/${e}/test-cases/export`)}async function kr(e,r){return p(`/api/prompts/${e}/test-cases/import`,{method:"POST",body:JSON.stringify(r)})}async function Fr(e){return p(`/api/prompts/${e}/test-jobs`)}async function Gr(e){return p("/api/test/run",{method:"POST",body:JSON.stringify(e)})}async function Hr(e){return p(`/api/test/status/${e}`)}async function Ur(e){return p(`/api/prompts/${e}/improvement-jobs`)}async function qr(e){return p("/api/improve/start",{method:"POST",body:JSON.stringify(e)})}async function Yr(e){return p(`/api/improve/status/${e}`)}let vr=0;function mr(){const{subscribe:e,update:r}=I([]);return{subscribe:e,show(t,a="info",n=5e3){const s=++vr;return r(o=>[...o,{id:s,text:t,type:a}]),setTimeout(()=>{r(o=>o.filter(f=>f.id!==s))},n),s},dismiss(t){r(a=>a.filter(n=>n.id!==t))},clear(){r(()=>[])}}}const te=mr();function U(e){return te.show(e,"success")}function O(e){return te.show(e,"error")}function zr(e){return te.show(e,"info")}const Pe=I([]),k=I(null),V=I(new Set),x=I({}),gr=I(""),Se=I(!1),Br=er([Pe,gr],([e,r])=>{const t=r.trim().toLowerCase();return t?e.filter(a=>a.name.toLowerCase().includes(t)):e});async function q(){Se.set(!0);try{const e=await fr();Pe.set(e);const r=D(k);r&&V.update(t=>(t.add(r.promptGroupId),t))}catch{O("Error loading prompts")}finally{Se.set(!1)}}async function hr(e,r){try{const t=await lr(r);return x.update(a=>({...a,[e]:t})),t}catch{return O("Error loading prompt versions"),[]}}async function Y(e){try{const r=await ur(e);k.set(r),sessionStorage.setItem("selectedPromptId",e.toString());const t=new URL(window.location.href);t.searchParams.set("promptId",e.toString()),window.history.replaceState({},"",t.toString()),V.update(a=>(a.add(r.promptGroupId),a))}catch{O("Error loading prompt")}}function be(){k.set(null),sessionStorage.removeItem("selectedPromptId");const e=new URL(window.location.href);e.searchParams.delete("promptId"),window.history.replaceState({},"",e.toString())}async function Wr(e,r){if(D(V).has(e))V.update(n=>(n.delete(e),new Set(n)));else{V.set(new Set([e])),D(x)[e]||await hr(e,r);const s=D(x)[e];s&&s.length>0&&await Y(s[0].id)}}async function Kr(e){try{const r=await Te(e);return await q(),await Y(r.id),U("Prompt created successfully!"),r}catch(r){return O(r.message||"Failed to create prompt"),null}}async function Qr(e,r,t,a){try{const n=await Te({name:r,content:t,expectedSchema:a,parentVersionId:e});return x.update(s=>{const o={...s};return delete o[n.promptGroupId],o}),await q(),await Y(n.id),U("New version saved!"),n}catch(n){return O(n.message||"Failed to save prompt"),null}}async function Xr(e,r){try{await dr(e),U("Version deleted");const t=D(k);return(t==null?void 0:t.id)===e&&be(),x.update(a=>{const n={...a};return delete n[r],n}),await q(),!0}catch(t){return O(t.message||"Failed to delete version"),!1}}async function Zr(e,r){try{await pr(e),U("Prompt deleted");const t=D(k);return(t==null?void 0:t.promptGroupId)===r&&be(),x.update(a=>{const n={...a};return delete n[r],n}),V.update(a=>(a.delete(r),new Set(a))),await q(),!0}catch(t){return O(t.message||"Failed to delete prompt"),!1}}async function jr(){const r=new URLSearchParams(window.location.search).get("promptId"),t=sessionStorage.getItem("selectedPromptId"),a=r||t;if(a){const n=parseInt(a,10);isNaN(n)||await Y(n)}}function et(e){const r=new Date(e),t=String(r.getFullYear()).slice(-2),a=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0"),s=String(r.getHours()).padStart(2,"0"),o=String(r.getMinutes()).padStart(2,"0"),f=String(r.getSeconds()).padStart(2,"0");return`${t}.${a}.${n} - ${s}:${o}:${f}`}export{Ar as A,Cr as B,br as C,$r as D,Wr as E,Zr as F,V as G,x as H,et as I,Y as J,Xr as K,gr as L,be as M,Ir as N,Or as O,q as P,Pr as Q,Se as R,Br as S,ur as T,Kr as U,te as V,jr as W,Ur as a,Mr as b,O as c,Lr as d,U as e,Nr as f,Rr as g,qr as h,Yr as i,wr as j,Er as k,yr as l,zr as m,Qr as n,Fr as o,ge as p,Gr as q,Tr as r,k as s,Hr as t,Jr as u,kr as v,Vr as w,Dr as x,xr as y,_r as z};
