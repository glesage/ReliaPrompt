import{f as k,a as i,d as ot,c as ie,t as Je}from"../chunks/DJX18OcT.js";import{K as ze,p as pe,c as t,a as ve,s as o,r as e,t as ae,h as r,D as ye,B as H,b6 as Nt,C as nt,y as re,z as Ot,d as it,A as g,E as tt}from"../chunks/J2kTv08O.js";import{l as st,M as lt,a as fe,s as rt,b as Lt,c as dt,i as At}from"../chunks/CImCAzC8.js";import{o as Et}from"../chunks/8J-ESnej.js";import{i as ct}from"../chunks/BhuDEorp.js";import{d as xe,s as F,e as He}from"../chunks/D1iiyE8s.js";import{v as Vt,a as ne,x as Gt,c as Fe,k as Oe,m as Dt,s as oe,f as Ne,y as qt,z as Bt,A as jt,B as Kt,C as Rt,D as Jt,E as Tt,b as Ft,F as at,G as zt,H as Ht,I as Ut,J as pt,r as te,K as Wt,L as Qt,M as Xt,d as $,N as Yt,O as Zt,P as $t,Q as er,R as tr}from"../chunks/h8IXuia-.js";import{a as Pe,s as Y,i as q}from"../chunks/kHTcSwTF.js";import{s as rr}from"../chunks/D4bd7c4X.js";const ar=!0,or=!1,ra=Object.freeze(Object.defineProperty({__proto__:null,prerender:ar,ssr:or},Symbol.toStringTag,{value:"Module"})),nr=()=>{const S=rr;return{page:{subscribe:S.page.subscribe},navigating:{subscribe:S.navigating.subscribe},updated:S.updated}},ir={subscribe(S){return nr().page.subscribe(S)}},vt=ze({}),Ue=ze(!1),we=ze(!1);async function We(){we.set(!0);try{const S=await Vt();vt.set(S)}catch{ne("Error loading configuration")}finally{we.set(!1)}}async function sr(S){we.set(!0);try{return await Gt(S),await We(),await st(),Fe("Configuration saved successfully!"),!0}catch(a){return ne(a.message||"Failed to save configuration"),!1}finally{we.set(!1)}}function Te(){Ue.set(!0),We()}function Ie(){Ue.set(!1)}var lr=k('<a><span class="rail-link-label"> </span></a>'),dr=k('<aside class="app-rail" aria-label="Primary"><a class="app-rail-brand" href="/test-cases" aria-label="Relia Prompt Home"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg></a> <nav class="app-rail-nav" aria-label="Sections"></nav> <div class="app-rail-footer"><button id="setup-btn" class="rail-btn" title="LLMs">LLMs</button></div></aside>');function cr(S,a){pe(a,!1);const s=()=>Y(ir,"$page",G),[G,u]=Pe(),P=[{href:"/test-cases",label:"Test Cases"},{href:"/test-runs",label:"Test Runs"}];function E(J){return s().url.pathname===J||s().url.pathname.startsWith(J+"/")}ct();var B=dr(),R=o(t(B),2);Oe(R,5,()=>P,Dt,(J,c)=>{var v=lr();let I;var N=t(v),V=t(N,!0);e(N),e(v),ae((O,M)=>{I=oe(v,1,"rail-link",null,I,O),Ne(v,"href",r(c).href),Ne(v,"aria-current",M),F(V,r(c).label)},[()=>({active:E(r(c).href)}),()=>E(r(c).href)?"page":void 0]),i(J,v)}),e(R);var p=o(R,2),m=t(p);m.__click=function(...J){Te==null||Te.apply(this,J)},e(p),e(B),i(S,B),ve(),u()}xe(["click"]);var pr=ot('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>'),vr=ot('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>'),ur=k('<div class="sidebar-versions-loading">Loading...</div>'),_r=k('<div><div class="sidebar-version-info"><span class="badge badge-version"> </span> <span class="sidebar-version-date"> </span></div> <div class="sidebar-version-actions"><button class="sidebar-action-btn view version-view" title="View prompt"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button> <button class="sidebar-action-btn delete version-delete" title="Delete this version"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div></div>'),mr=k('<button class="sidebar-new-version-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> <span>Create New Version</span></button>'),fr=k("<!> <!>",1),gr=k('<div><div class="sidebar-group-header"><span class="sidebar-expand-icon"><!></span> <div class="sidebar-group-info"><div class="sidebar-group-name"> </div> <div class="sidebar-group-meta"> </div></div> <div class="sidebar-group-actions"><button class="sidebar-action-btn view" title="View prompt"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button> <button class="sidebar-action-btn delete" title="Delete all versions"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div></div> <div class="sidebar-versions"><!></div></div>');function br(S,a){pe(a,!0);const s=()=>Y(jt,"$expandedGroups",P),G=()=>Y(Kt,"$versionsCache",P),u=()=>Y(Ft,"$selectedPrompt",P),[P,E]=Pe(),B=ye(()=>s().has(a.group.promptGroupId)),R=ye(()=>G()[a.group.promptGroupId]||[]),p=ye(()=>r(R).length>0?r(R)[0]:null);async function m(n){n.target.closest(".sidebar-action-btn")||await qt(a.group.promptGroupId,a.group.id)}async function J(n,x){x.target.closest(".version-delete")||await Jt(n.id)}async function c(){confirm(`Delete ALL versions of "${a.group.name}"? This will also delete all test cases. This cannot be undone.`)&&await Bt(a.group.id,a.group.promptGroupId)}async function v(n){confirm(`Delete version ${n.version} of "${n.name}"? Test cases will be preserved. This cannot be undone.`)&&await Tt(n.id,n.promptGroupId)}var I=gr();let N;var V=t(I);V.__click=m;var O=t(V),M=t(O);{var j=n=>{var x=pr();i(n,x)},b=n=>{var x=vr();i(n,x)};q(M,n=>{r(B)?n(j):n(b,!1)})}e(O);var y=o(O,2),L=t(y),K=t(L,!0);e(L);var U=o(L,2),d=t(U);e(U),e(y);var _=o(y,2),C=t(_);C.__click=()=>a.onViewPrompt(a.group.id,a.group.name);var h=o(C,2);h.__click=c,e(_),e(V);var w=o(V,2),D=t(w);{var f=n=>{var x=ie(),W=H(x);{var T=se=>{var de=ur();i(se,de)},Z=se=>{var de=fr(),ge=H(de);Oe(ge,17,()=>r(R),ee=>ee.id,(ee,z)=>{var le=_r();let be;le.__click=me=>J(r(z),me);var he=t(le),ce=t(he),Me=t(ce);e(ce);var Ce=o(ce,2),Ee=t(Ce,!0);e(Ce),e(he);var ue=o(he,2),_e=t(ue);_e.__click=()=>a.onViewPrompt(r(z).id,r(z).name,r(z).version);var ke=o(_e,2);ke.__click=()=>v(r(z)),e(ue),e(le),ae(me=>{var Se;be=oe(le,1,"sidebar-version-item",null,be,{active:((Se=u())==null?void 0:Se.id)===r(z).id}),F(Me,`v${r(z).version??""}`),F(Ee,me)},[()=>Rt(r(z).createdAt)]),i(ee,le)});var Le=o(ge,2);{var Ae=ee=>{var z=mr();z.__click=()=>a.onEditPrompt(r(p).id,r(p).name),i(ee,z)};q(Le,ee=>{r(p)&&ee(Ae)})}i(se,de)};q(W,se=>{r(R).length===0?se(T):se(Z,!1)})}i(n,x)};q(D,n=>{r(B)&&n(f)})}e(w),e(I),ae(()=>{N=oe(I,1,"sidebar-group",null,N,{expanded:r(B)}),Ne(I,"data-group-id",a.group.promptGroupId),F(K,a.group.name),F(d,`${a.group.version??""} version${a.group.version>1?"s":""}`)}),i(S,I),ve(),E()}xe(["click"]);var hr=k('<div class="sidebar-empty">Loading...</div>'),kr=k('<div class="sidebar-empty">No matches.<br/>Try a different search.</div>'),yr=k('<div class="sidebar-empty">No prompts yet.<br/>Create your first one!</div>'),wr=k('<aside class="app-pane app-pane-prompts" aria-label="Prompts"><div class="pane-header"><div class="pane-title">Prompts</div> <div class="pane-header-actions"><button class="btn btn-secondary btn-sm" title="Export all prompts">Export</button> <button class="btn btn-secondary btn-sm" title="Import prompts">Import</button> <button id="new-prompt-btn" class="btn btn-primary btn-sm">New</button></div></div> <div class="pane-search"><input id="prompt-filter" type="search" placeholder="Search prompts…" autocomplete="off"/> <div class="pane-search-hint">⌘K</div></div> <div class="pane-body"><div class="sidebar-list" id="sidebar-prompts"><!></div></div></aside>');function xr(S,a){pe(a,!0);const s=()=>Y(at,"$promptFilter",P),G=()=>Y(Qt,"$promptsLoading",P),u=()=>Y(Xt,"$filteredPromptGroups",P),[P,E]=Pe();function B(d){const _=d.target;at.set(_.value)}function R(d){const _=d.target;(_.classList.contains("sidebar-list")||_.classList.contains("sidebar-empty"))&&zt()}function p(d){if((d.metaKey||d.ctrlKey)&&(d.key==="k"||d.key==="K")){d.preventDefault();const _=document.getElementById("prompt-filter");_==null||_.focus()}}async function m(){try{const d=await Ht(),_=JSON.stringify(d,null,2),C=new Blob([_],{type:"application/json"}),h=URL.createObjectURL(C),w=document.createElement("a");w.href=h,w.download=`prompts-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(h),Fe(`Exported ${d.length} prompt${d.length!==1?"s":""}`)}catch{ne("Error exporting prompts")}}async function J(){const d=document.createElement("input");d.type="file",d.accept="application/json",d.onchange=async _=>{var w;const C=_.target,h=(w=C==null?void 0:C.files)==null?void 0:w[0];if(h)try{const D=await h.text();let f;try{f=JSON.parse(D)}catch{ne("Invalid JSON file");return}if(!Array.isArray(f)){ne("JSON must be an array of prompts");return}for(let T=0;T<f.length;T++){const Z=f[T];if(!Z.name||!Z.content){ne(`Prompt ${T+1} is missing required fields (name, content)`);return}}const n=f.length;if(!confirm(`Import ${n} prompt${n!==1?"s":""}? Prompts with existing names will be skipped.`))return;const x=await Ut(f);let W=`Imported ${x.created} prompt${x.created!==1?"s":""}`;x.skipped>0&&(W+=`, skipped ${x.skipped} (already exist)`),Fe(W),await pt()}catch{ne("Error reading file")}},d.click()}var c=wr();He("keydown",Nt,p);var v=t(c),I=o(t(v),2),N=t(I);N.__click=m;var V=o(N,2);V.__click=J;var O=o(V,2);O.__click=function(...d){var _;(_=a.onNewPrompt)==null||_.apply(this,d)},e(I),e(v);var M=o(v,2),j=t(M);te(j),j.__input=B,nt(2),e(M);var b=o(M,2),y=t(b);y.__click=R;var L=t(y);{var K=d=>{var _=hr();i(d,_)},U=d=>{var _=ie(),C=H(_);{var h=D=>{var f=ie(),n=H(f);{var x=T=>{var Z=kr();i(T,Z)},W=T=>{var Z=yr();i(T,Z)};q(n,T=>{s()?T(x):T(W,!1)})}i(D,f)},w=D=>{var f=ie(),n=H(f);Oe(n,1,u,x=>x.promptGroupId,(x,W)=>{br(x,{get group(){return r(W)},get onViewPrompt(){return a.onViewPrompt},get onEditPrompt(){return a.onEditPrompt}})}),i(D,f)};q(C,D=>{u().length===0?D(h):D(w,!1)},!0)}i(d,_)};q(L,d=>{G()?d(K):d(U,!1)})}e(y),e(b),e(c),ae(()=>Wt(j,s())),i(S,c),ve(),E()}xe(["click","input"]);var Pr=k('<button id="config-close-btn" type="button" class="secondary">Cancel</button> <button type="submit" form="config-form"> </button>',1),Mr=k('<div class="form-group"><label>Models</label> <!></div>'),Cr=k('<div class="form-group"><label>Models</label> <!></div>'),Sr=k('<div class="form-group"><label>Models</label> <!></div>'),Ir=k('<div class="form-group"><label>Models</label> <!></div>'),Nr=k('<div class="form-group"><label>Models</label> <!></div>'),Or=k('<div class="form-group"><label>Models</label> <!></div>'),Lr=k('<form id="config-form"><div class="provider-section"><h3>OpenAI <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (sk-...)"/></div> <!></div> <div class="provider-section"><h3>AWS Bedrock <span> </span></h3> <div class="form-group"><input type="text" placeholder="Access Key ID (AKIA...)"/></div> <div class="form-group"><input type="text" placeholder="Secret Access Key"/></div> <div class="form-group"><input type="text" placeholder="Session Token (optional)"/></div> <div class="form-group"><input type="text" placeholder="Region (e.g., ap-southeast-2)"/></div> <!></div> <div class="provider-section"><h3>Deepseek <span id="deepseek-status"> </span></h3> <div class="form-group"><input id="deepseek_api_key" type="text" placeholder="API Key (sk-...)"/></div> <!></div> <div class="provider-section"><h3>Gemini <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key"/></div> <!></div> <div class="provider-section"><h3>Groq <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (gsk_...)"/></div> <!></div> <div class="provider-section"><h3>OpenRouter <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (sk-or-v1-...)"/></div> <!></div></form>');function Ar(S,a){pe(a,!0);const s=()=>Y(vt,"$config",B),G=()=>Y(Lt,"$availableModels",B),u=()=>Y(rt,"$selectedModels",B),P=()=>Y(Ue,"$configModalOpen",B),E=()=>Y(we,"$configLoading",B),[B,R]=Pe();let p=re(Ot({openai_api_key:"",bedrock_access_key_id:"",bedrock_secret_access_key:"",bedrock_session_token:"",bedrock_region:"ap-southeast-2",deepseek_api_key:"",gemini_api_key:"",groq_api_key:"",openrouter_api_key:""}));it(()=>{s()&&g(p,{openai_api_key:s().openai_api_key||"",bedrock_access_key_id:s().bedrock_access_key_id||"",bedrock_secret_access_key:s().bedrock_secret_access_key||"",bedrock_session_token:s().bedrock_session_token||"",bedrock_region:s().bedrock_region||"ap-southeast-2",deepseek_api_key:s().deepseek_api_key||"",gemini_api_key:s().gemini_api_key||"",groq_api_key:s().groq_api_key||"",openrouter_api_key:s().openrouter_api_key||""},!0)});function m(I){switch(I){case"openai":return!!s().openai_api_key;case"bedrock":return!!s().bedrock_access_key_id&&!!s().bedrock_secret_access_key;case"deepseek":return!!s().deepseek_api_key;case"gemini":return!!s().gemini_api_key;case"groq":return!!s().groq_api_key;case"openrouter":return!!s().openrouter_api_key;default:return!1}}async function J(I){I.preventDefault(),await sr(r(p))&&await st()}function c(I){return G().filter(N=>N.provider===I)}function v(I,N){const O=[...u().filter(M=>M.provider!==I),...N.filter(M=>M.provider===I)];rt.set(O)}lt(S,{id:"config-modal",get open(){return P()},title:"LLM Configuration",get onclose(){return Ie},footer:N=>{var V=Pr(),O=H(V);O.__click=function(...b){Ie==null||Ie.apply(this,b)};var M=o(O,2),j=t(M,!0);e(M),ae(()=>{M.disabled=E(),F(j,E()?"Saving...":"Save Configuration")}),i(N,V)},children:(N,V)=>{var O=Lr(),M=t(O),j=t(M),b=o(t(j));let y;var L=t(b,!0);e(b),e(j);var K=o(j,2),U=t(K);te(U),e(K);var d=o(K,2);{var _=l=>{var A=Mr(),Q=o(t(A),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("OpenAI",X),filterProvider:"OpenAI"}),e(A),i(l,A)};q(d,l=>{c("OpenAI").length>0&&l(_)})}e(M);var C=o(M,2),h=t(C),w=o(t(h));let D;var f=t(w,!0);e(w),e(h);var n=o(h,2),x=t(n);te(x),e(n);var W=o(n,2),T=t(W);te(T),e(W);var Z=o(W,2),se=t(Z);te(se),e(Z);var de=o(Z,2),ge=t(de);te(ge),e(de);var Le=o(de,2);{var Ae=l=>{var A=Cr(),Q=o(t(A),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("Bedrock",X),filterProvider:"Bedrock"}),e(A),i(l,A)};q(Le,l=>{c("Bedrock").length>0&&l(Ae)})}e(C);var ee=o(C,2),z=t(ee),le=o(t(z));let be;var he=t(le,!0);e(le),e(z);var ce=o(z,2),Me=t(ce);te(Me),e(ce);var Ce=o(ce,2);{var Ee=l=>{var A=Sr(),Q=o(t(A),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("Deepseek",X),filterProvider:"Deepseek"}),e(A),i(l,A)};q(Ce,l=>{c("Deepseek").length>0&&l(Ee)})}e(ee);var ue=o(ee,2),_e=t(ue),ke=o(t(_e));let me;var Se=t(ke,!0);e(ke),e(_e);var Ve=o(_e,2),Qe=t(Ve);te(Qe),e(Ve);var ut=o(Ve,2);{var _t=l=>{var A=Ir(),Q=o(t(A),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("Gemini",X),filterProvider:"Gemini"}),e(A),i(l,A)};q(ut,l=>{c("Gemini").length>0&&l(_t)})}e(ue);var Ge=o(ue,2),De=t(Ge),qe=o(t(De));let Xe;var mt=t(qe,!0);e(qe),e(De);var Be=o(De,2),Ye=t(Be);te(Ye),e(Be);var ft=o(Be,2);{var gt=l=>{var A=Nr(),Q=o(t(A),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("Groq",X),filterProvider:"Groq"}),e(A),i(l,A)};q(ft,l=>{c("Groq").length>0&&l(gt)})}e(Ge);var Ze=o(Ge,2),je=t(Ze),Ke=o(t(je));let $e;var bt=t(Ke,!0);e(Ke),e(je);var Re=o(je,2),et=t(Re);te(et),e(Re);var ht=o(Re,2);{var kt=l=>{var A=Or(),Q=o(t(A),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("OpenRouter",X),filterProvider:"OpenRouter"}),e(A),i(l,A)};q(ht,l=>{c("OpenRouter").length>0&&l(kt)})}e(Ze),e(O),ae((l,A,Q,X,yt,wt,xt,Pt,Mt,Ct,St,It)=>{y=oe(b,1,"status-badge",null,y,l),F(L,A),D=oe(w,1,"status-badge",null,D,Q),F(f,X),be=oe(le,1,"status-badge",null,be,yt),F(he,wt),me=oe(ke,1,"status-badge",null,me,xt),F(Se,Pt),Xe=oe(qe,1,"status-badge",null,Xe,Mt),F(mt,Ct),$e=oe(Ke,1,"status-badge",null,$e,St),F(bt,It)},[()=>({configured:m("openai"),"not-configured":!m("openai")}),()=>m("openai")?"Configured":"Not configured",()=>({configured:m("bedrock"),"not-configured":!m("bedrock")}),()=>m("bedrock")?"Configured":"Not configured",()=>({configured:m("deepseek"),"not-configured":!m("deepseek")}),()=>m("deepseek")?"Configured":"Not configured",()=>({configured:m("gemini"),"not-configured":!m("gemini")}),()=>m("gemini")?"Configured":"Not configured",()=>({configured:m("groq"),"not-configured":!m("groq")}),()=>m("groq")?"Configured":"Not configured",()=>({configured:m("openrouter"),"not-configured":!m("openrouter")}),()=>m("openrouter")?"Configured":"Not configured"]),He("submit",O,J),$(U,()=>r(p).openai_api_key,l=>r(p).openai_api_key=l),$(x,()=>r(p).bedrock_access_key_id,l=>r(p).bedrock_access_key_id=l),$(T,()=>r(p).bedrock_secret_access_key,l=>r(p).bedrock_secret_access_key=l),$(se,()=>r(p).bedrock_session_token,l=>r(p).bedrock_session_token=l),$(ge,()=>r(p).bedrock_region,l=>r(p).bedrock_region=l),$(Me,()=>r(p).deepseek_api_key,l=>r(p).deepseek_api_key=l),$(Qe,()=>r(p).gemini_api_key,l=>r(p).gemini_api_key=l),$(Ye,()=>r(p).groq_api_key,l=>r(p).groq_api_key=l),$(et,()=>r(p).openrouter_api_key,l=>r(p).openrouter_api_key=l),i(N,O)},$$slots:{footer:!0,default:!0}}),ve(),R()}xe(["click"]);var Er=k('<span class="badge badge-version"> </span>'),Vr=k('<button type="button" class="secondary">Close</button>'),Gr=k('<button type="button" class="secondary">Cancel</button> <button type="submit" form="new-prompt-form"><!></button>',1),Dr=k('<div class="form-group"><label>Expected Output Schema</label> <pre class="view-prompt-content"> </pre></div>'),qr=k('<div class="form-group"><label>Prompt Content</label> <pre class="view-prompt-content"> </pre></div> <!>',1),Br=k('<div class="form-group"><label for="new-prompt-name">Prompt Name</label> <input type="text" id="new-prompt-name" placeholder="e.g., extract-entities" required/></div>'),jr=k("<small>Saving will create a new version of this prompt</small>"),Kr=k('<form id="new-prompt-form"><!> <div class="form-group"><label for="new-prompt-content">Prompt Content</label> <textarea id="new-prompt-content" class="tall" placeholder="Enter your system prompt here..." required></textarea> <!></div> <div class="form-group"><label for="prompt-schema">Expected Output Schema (JSON)</label> <textarea id="prompt-schema" class="medium"></textarea> <small>Optional. JSON Schema for structured LLM output (used with response_format).</small></div></form>');function Rr(S,a){pe(a,!0);let s=re(""),G=re(""),u=re(""),P=re(!1),E=re(null);it(()=>{a.open&&a.promptId&&(a.mode==="edit"||a.mode==="view")?B(a.promptId):a.open||(g(s,""),g(G,""),g(u,""),g(E,null))});async function B(c){g(P,!0);try{const v=await Yt(c);g(E,v,!0),g(s,v.name,!0),g(G,v.content,!0),g(u,v.expectedSchema||"",!0)}catch{ne("Error loading prompt")}finally{g(P,!1)}}function R(c){if(!c.trim())return!0;try{return JSON.parse(c),!0}catch{return!1}}async function p(c){if(c.preventDefault(),!r(s).trim()||!r(G).trim()){ne("Please fill in all required fields");return}if(r(u)&&!R(r(u))){ne("Expected output schema must be valid JSON");return}g(P,!0);try{a.mode==="new"?await Zt({name:r(s).trim(),content:r(G).trim(),expectedSchema:r(u).trim()||void 0})&&a.onclose():a.mode==="edit"&&a.promptId&&a.promptName&&await $t(a.promptId,a.promptName,r(G).trim(),r(u).trim()||void 0)&&a.onclose()}finally{g(P,!1)}}function m(c){try{return JSON.stringify(JSON.parse(c),null,2)}catch{return c}}const J=ye(()=>a.mode==="new"?"Create New Prompt":a.mode==="edit"?`Edit "${a.promptName}"`:a.promptName||"Prompt");{const c=N=>{var V=ie(),O=H(V);{var M=j=>{var b=Er(),y=t(b);e(b),ae(()=>{var L;return F(y,`v${(a.promptVersion||((L=r(E))==null?void 0:L.version))??""}`)}),i(j,b)};q(O,j=>{var b;a.mode!=="new"&&(a.promptVersion||(b=r(E))!=null&&b.version)&&j(M)})}i(N,V)},v=N=>{var V=ie(),O=H(V);{var M=b=>{var y=Vr();y.__click=function(...L){var K;(K=a.onclose)==null||K.apply(this,L)},i(b,y)},j=b=>{var y=Gr(),L=H(y);L.__click=function(...C){var h;(h=a.onclose)==null||h.apply(this,C)};var K=o(L,2),U=t(K);{var d=C=>{var h=Je("Saving...");i(C,h)},_=C=>{var h=ie(),w=H(h);{var D=n=>{var x=Je("Create Prompt");i(n,x)},f=n=>{var x=Je("Save as New Version");i(n,x)};q(w,n=>{a.mode==="new"?n(D):n(f,!1)},!0)}i(C,h)};q(U,C=>{r(P)?C(d):C(_,!1)})}e(K),ae(()=>K.disabled=r(P)),i(b,y)};q(O,b=>{a.mode==="view"?b(M):b(j,!1)})}i(N,V)};let I=ye(()=>a.mode==="view");lt(S,{id:"new-prompt-modal",get open(){return a.open},get title(){return r(J)},get wide(){return r(I)},get onclose(){return a.onclose},titleBadge:c,footer:v,children:(N,V)=>{var O=ie(),M=H(O);{var j=y=>{var L=qr(),K=H(L),U=o(t(K),2),d=t(U,!0);e(U),e(K);var _=o(K,2);{var C=h=>{var w=Dr(),D=o(t(w),2),f=t(D,!0);e(D),e(w),ae(n=>F(f,n),[()=>m(r(E).expectedSchema)]),i(h,w)};q(_,h=>{var w;(w=r(E))!=null&&w.expectedSchema&&h(C)})}ae(()=>{var h;return F(d,((h=r(E))==null?void 0:h.content)||"")}),i(y,L)},b=y=>{var L=Kr(),K=t(L);{var U=f=>{var n=Br(),x=o(t(n),2);te(x),e(n),$(x,()=>r(s),W=>g(s,W)),i(f,n)};q(K,f=>{a.mode==="new"&&f(U)})}var d=o(K,2),_=o(t(d),2);tt(_);var C=o(_,2);{var h=f=>{var n=jr();i(f,n)};q(C,f=>{a.mode==="edit"&&f(h)})}e(d);var w=o(d,2),D=o(t(w),2);tt(D),Ne(D,"placeholder",'{"type": "array", "items": {"type": "object", "properties": {"name": {"type": "string"}}}}'),nt(2),e(w),e(L),He("submit",L,p),$(_,()=>r(G),f=>g(G,f)),$(D,()=>r(u),f=>g(u,f)),i(y,L)};q(M,y=>{a.mode==="view"?y(j):y(b,!1)})}i(N,O)},$$slots:{titleBadge:!0,footer:!0,default:!0}})}ve()}xe(["click"]);var Jr=k("<div> </div>"),Tr=k('<div id="app-message"></div>');function Fr(S,a){pe(a,!1);const s=()=>Y(er,"$messages",G),[G,u]=Pe();ct();var P=ie(),E=H(P);{var B=R=>{var p=Tr();Oe(p,5,s,m=>m.id,(m,J)=>{var c=Jr(),v=t(c,!0);e(c),ae(()=>{oe(c,1,`message ${r(J).type??""}`),F(v,r(J).text)}),i(m,c)}),e(p),i(R,p)};q(E,R=>{s().length>0&&R(B)})}i(S,P),ve(),u()}var zr=k('<div class="app-layout app-shell"><!> <!> <main class="app-pane app-pane-content" aria-label="Content"><!> <!></main></div> <!> <!>',1);function Hr(S,a){pe(a,!0);let s=re(!1),G=re("new"),u=re(void 0),P=re(void 0),E=re(void 0);function B(){g(G,"new"),g(u,void 0),g(P,void 0),g(E,void 0),g(s,!0)}function R(b,y,L){g(G,"view"),g(u,b,!0),g(P,y,!0),g(E,L,!0),g(s,!0)}function p(b,y){g(G,"edit"),g(u,b,!0),g(P,y,!0),g(E,void 0),g(s,!0)}function m(){g(s,!1)}Et(async()=>{await Promise.all([pt(),At(),We()]),await tr()});var J=zr(),c=H(J),v=t(c);cr(v,{});var I=o(v,2);xr(I,{onNewPrompt:B,onViewPrompt:R,onEditPrompt:p});var N=o(I,2),V=t(N);Fr(V,{});var O=o(V,2);dt(O,()=>a.children),e(N),e(c);var M=o(c,2);Ar(M,{});var j=o(M,2);Rr(j,{get mode(){return r(G)},get open(){return r(s)},onclose:m,get promptId(){return r(u)},get promptName(){return r(P)},get promptVersion(){return r(E)}}),i(S,J),ve()}function aa(S,a){Hr(S,{children:(s,G)=>{var u=ie(),P=H(u);dt(P,()=>a.children),i(s,u)},$$slots:{default:!0}})}export{aa as component,ra as universal};
