import{f as k,a as i,d as ot,c as ie,t as Je}from"../chunks/DpXxpRXC.js";import{K as He,p as pe,d as t,a as ve,e as o,r as e,t as ae,g as r,i as ye,f as U,b6 as Nt,n as nt,s as re,b as Ot,u as it,c as g,h as tt}from"../chunks/OLrnjfeW.js";import{l as st,M as lt,a as fe,s as rt,b as Lt,c as dt,i as Vt}from"../chunks/SCM_VZYY.js";import{o as At}from"../chunks/brwGxWwK.js";import{i as ct}from"../chunks/Db5RXSDK.js";import{d as xe,s as F,e as Ue}from"../chunks/D0M6toz8.js";import{B as Et,c as ne,D as Gt,e as Fe,j as Oe,l as Dt,k as oe,p as Ne,E as qt,F as jt,G as Bt,H as Kt,I as Rt,J as Jt,K as Tt,s as Ft,L as at,M as Ht,N as Ut,O as zt,P as pt,r as te,Q as Wt,R as Qt,S as Xt,f as $,T as Yt,U as Zt,n as $t,V as er,W as tr}from"../chunks/DDc5wW8a.js";import{a as Pe,s as Y,i as q}from"../chunks/CkCyRFQt.js";import{s as rr}from"../chunks/B84XH8ny.js";const ar=!0,or=!1,ra=Object.freeze(Object.defineProperty({__proto__:null,prerender:ar,ssr:or},Symbol.toStringTag,{value:"Module"})),nr=()=>{const C=rr;return{page:{subscribe:C.page.subscribe},navigating:{subscribe:C.navigating.subscribe},updated:C.updated}},ir={subscribe(C){return nr().page.subscribe(C)}},vt=He({}),ze=He(!1),we=He(!1);async function We(){we.set(!0);try{const C=await Et();vt.set(C)}catch{ne("Error loading configuration")}finally{we.set(!1)}}async function sr(C){we.set(!0);try{return await Gt(C),await We(),await st(),Fe("Configuration saved successfully!"),!0}catch(a){return ne(a.message||"Failed to save configuration"),!1}finally{we.set(!1)}}function Te(){ze.set(!0),We()}function Ie(){ze.set(!1)}var lr=k('<a><span class="rail-link-label"> </span></a>'),dr=k('<aside class="app-rail" aria-label="Primary"><a class="app-rail-brand" href="/test-cases" aria-label="Relia Prompt Home"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg></a> <nav class="app-rail-nav" aria-label="Sections"></nav> <div class="app-rail-footer"><button id="setup-btn" class="rail-btn" title="LLMs">LLMs</button></div></aside>');function cr(C,a){pe(a,!1);const s=()=>Y(ir,"$page",G),[G,u]=Pe(),P=[{href:"/test-cases",label:"Test Cases"},{href:"/test-runs",label:"Test Runs"},{href:"/improve",label:"Auto-Improve"}];function A(J){return s().url.pathname===J||s().url.pathname.startsWith(J+"/")}ct();var j=dr(),R=o(t(j),2);Oe(R,5,()=>P,Dt,(J,c)=>{var v=lr();let I;var N=t(v),E=t(N,!0);e(N),e(v),ae((O,M)=>{I=oe(v,1,"rail-link",null,I,O),Ne(v,"href",r(c).href),Ne(v,"aria-current",M),F(E,r(c).label)},[()=>({active:A(r(c).href)}),()=>A(r(c).href)?"page":void 0]),i(J,v)}),e(R);var p=o(R,2),m=t(p);m.__click=function(...J){Te==null||Te.apply(this,J)},e(p),e(j),i(C,j),ve(),u()}xe(["click"]);var pr=ot('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>'),vr=ot('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>'),ur=k('<div class="sidebar-versions-loading">Loading...</div>'),_r=k('<div><div class="sidebar-version-info"><span class="badge badge-version"> </span> <span class="sidebar-version-date"> </span></div> <div class="sidebar-version-actions"><button class="sidebar-action-btn view version-view" title="View prompt"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button> <button class="sidebar-action-btn delete version-delete" title="Delete this version"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div></div>'),mr=k('<button class="sidebar-new-version-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> <span>Create New Version</span></button>'),fr=k("<!> <!>",1),gr=k('<div><div class="sidebar-group-header"><span class="sidebar-expand-icon"><!></span> <div class="sidebar-group-info"><div class="sidebar-group-name"> </div> <div class="sidebar-group-meta"> </div></div> <div class="sidebar-group-actions"><button class="sidebar-action-btn view" title="View prompt"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button> <button class="sidebar-action-btn delete" title="Delete all versions"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div></div> <div class="sidebar-versions"><!></div></div>');function br(C,a){pe(a,!0);const s=()=>Y(Bt,"$expandedGroups",P),G=()=>Y(Kt,"$versionsCache",P),u=()=>Y(Ft,"$selectedPrompt",P),[P,A]=Pe(),j=ye(()=>s().has(a.group.promptGroupId)),R=ye(()=>G()[a.group.promptGroupId]||[]),p=ye(()=>r(R).length>0?r(R)[0]:null);async function m(n){n.target.closest(".sidebar-action-btn")||await qt(a.group.promptGroupId,a.group.id)}async function J(n,x){x.target.closest(".version-delete")||await Jt(n.id)}async function c(){confirm(`Delete ALL versions of "${a.group.name}"? This will also delete all test cases. This cannot be undone.`)&&await jt(a.group.id,a.group.promptGroupId)}async function v(n){confirm(`Delete version ${n.version} of "${n.name}"? Test cases will be preserved. This cannot be undone.`)&&await Tt(n.id,n.promptGroupId)}var I=gr();let N;var E=t(I);E.__click=m;var O=t(E),M=t(O);{var B=n=>{var x=pr();i(n,x)},b=n=>{var x=vr();i(n,x)};q(M,n=>{r(j)?n(B):n(b,!1)})}e(O);var y=o(O,2),L=t(y),K=t(L,!0);e(L);var z=o(L,2),d=t(z);e(z),e(y);var _=o(y,2),S=t(_);S.__click=()=>a.onViewPrompt(a.group.id,a.group.name);var h=o(S,2);h.__click=c,e(_),e(E);var w=o(E,2),D=t(w);{var f=n=>{var x=ie(),W=U(x);{var T=se=>{var de=ur();i(se,de)},Z=se=>{var de=fr(),ge=U(de);Oe(ge,17,()=>r(R),ee=>ee.id,(ee,H)=>{var le=_r();let be;le.__click=me=>J(r(H),me);var he=t(le),ce=t(he),Me=t(ce);e(ce);var Se=o(ce,2),Ae=t(Se,!0);e(Se),e(he);var ue=o(he,2),_e=t(ue);_e.__click=()=>a.onViewPrompt(r(H).id,r(H).name,r(H).version);var ke=o(_e,2);ke.__click=()=>v(r(H)),e(ue),e(le),ae(me=>{var Ce;be=oe(le,1,"sidebar-version-item",null,be,{active:((Ce=u())==null?void 0:Ce.id)===r(H).id}),F(Me,`v${r(H).version??""}`),F(Ae,me)},[()=>Rt(r(H).createdAt)]),i(ee,le)});var Le=o(ge,2);{var Ve=ee=>{var H=mr();H.__click=()=>a.onEditPrompt(r(p).id,r(p).name),i(ee,H)};q(Le,ee=>{r(p)&&ee(Ve)})}i(se,de)};q(W,se=>{r(R).length===0?se(T):se(Z,!1)})}i(n,x)};q(D,n=>{r(j)&&n(f)})}e(w),e(I),ae(()=>{N=oe(I,1,"sidebar-group",null,N,{expanded:r(j)}),Ne(I,"data-group-id",a.group.promptGroupId),F(K,a.group.name),F(d,`${a.group.version??""} version${a.group.version>1?"s":""}`)}),i(C,I),ve(),A()}xe(["click"]);var hr=k('<div class="sidebar-empty">Loading...</div>'),kr=k('<div class="sidebar-empty">No matches.<br/>Try a different search.</div>'),yr=k('<div class="sidebar-empty">No prompts yet.<br/>Create your first one!</div>'),wr=k('<aside class="app-pane app-pane-prompts" aria-label="Prompts"><div class="pane-header"><div class="pane-title">Prompts</div> <div class="pane-header-actions"><button class="btn btn-secondary btn-sm" title="Export all prompts">Export</button> <button class="btn btn-secondary btn-sm" title="Import prompts">Import</button> <button id="new-prompt-btn" class="btn btn-primary btn-sm">New</button></div></div> <div class="pane-search"><input id="prompt-filter" type="search" placeholder="Search prompts…" autocomplete="off"/> <div class="pane-search-hint">⌘K</div></div> <div class="pane-body"><div class="sidebar-list" id="sidebar-prompts"><!></div></div></aside>');function xr(C,a){pe(a,!0);const s=()=>Y(at,"$promptFilter",P),G=()=>Y(Qt,"$promptsLoading",P),u=()=>Y(Xt,"$filteredPromptGroups",P),[P,A]=Pe();function j(d){const _=d.target;at.set(_.value)}function R(d){const _=d.target;(_.classList.contains("sidebar-list")||_.classList.contains("sidebar-empty"))&&Ht()}function p(d){if((d.metaKey||d.ctrlKey)&&(d.key==="k"||d.key==="K")){d.preventDefault();const _=document.getElementById("prompt-filter");_==null||_.focus()}}async function m(){try{const d=await Ut(),_=JSON.stringify(d,null,2),S=new Blob([_],{type:"application/json"}),h=URL.createObjectURL(S),w=document.createElement("a");w.href=h,w.download=`prompts-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(h),Fe(`Exported ${d.length} prompt${d.length!==1?"s":""}`)}catch{ne("Error exporting prompts")}}async function J(){const d=document.createElement("input");d.type="file",d.accept="application/json",d.onchange=async _=>{var w;const S=_.target,h=(w=S==null?void 0:S.files)==null?void 0:w[0];if(h)try{const D=await h.text();let f;try{f=JSON.parse(D)}catch{ne("Invalid JSON file");return}if(!Array.isArray(f)){ne("JSON must be an array of prompts");return}for(let T=0;T<f.length;T++){const Z=f[T];if(!Z.name||!Z.content){ne(`Prompt ${T+1} is missing required fields (name, content)`);return}}const n=f.length;if(!confirm(`Import ${n} prompt${n!==1?"s":""}? Prompts with existing names will be skipped.`))return;const x=await zt(f);let W=`Imported ${x.created} prompt${x.created!==1?"s":""}`;x.skipped>0&&(W+=`, skipped ${x.skipped} (already exist)`),Fe(W),await pt()}catch{ne("Error reading file")}},d.click()}var c=wr();Ue("keydown",Nt,p);var v=t(c),I=o(t(v),2),N=t(I);N.__click=m;var E=o(N,2);E.__click=J;var O=o(E,2);O.__click=function(...d){var _;(_=a.onNewPrompt)==null||_.apply(this,d)},e(I),e(v);var M=o(v,2),B=t(M);te(B),B.__input=j,nt(2),e(M);var b=o(M,2),y=t(b);y.__click=R;var L=t(y);{var K=d=>{var _=hr();i(d,_)},z=d=>{var _=ie(),S=U(_);{var h=D=>{var f=ie(),n=U(f);{var x=T=>{var Z=kr();i(T,Z)},W=T=>{var Z=yr();i(T,Z)};q(n,T=>{s()?T(x):T(W,!1)})}i(D,f)},w=D=>{var f=ie(),n=U(f);Oe(n,1,u,x=>x.promptGroupId,(x,W)=>{br(x,{get group(){return r(W)},get onViewPrompt(){return a.onViewPrompt},get onEditPrompt(){return a.onEditPrompt}})}),i(D,f)};q(S,D=>{u().length===0?D(h):D(w,!1)},!0)}i(d,_)};q(L,d=>{G()?d(K):d(z,!1)})}e(y),e(b),e(c),ae(()=>Wt(B,s())),i(C,c),ve(),A()}xe(["click","input"]);var Pr=k('<button id="config-close-btn" type="button" class="secondary">Cancel</button> <button type="submit" form="config-form"> </button>',1),Mr=k('<div class="form-group"><label>Models</label> <!></div>'),Sr=k('<div class="form-group"><label>Models</label> <!></div>'),Cr=k('<div class="form-group"><label>Models</label> <!></div>'),Ir=k('<div class="form-group"><label>Models</label> <!></div>'),Nr=k('<div class="form-group"><label>Models</label> <!></div>'),Or=k('<div class="form-group"><label>Models</label> <!></div>'),Lr=k('<form id="config-form"><div class="provider-section"><h3>OpenAI <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (sk-...)"/></div> <!></div> <div class="provider-section"><h3>AWS Bedrock <span> </span></h3> <div class="form-group"><input type="text" placeholder="Access Key ID (AKIA...)"/></div> <div class="form-group"><input type="text" placeholder="Secret Access Key"/></div> <div class="form-group"><input type="text" placeholder="Session Token (optional)"/></div> <div class="form-group"><input type="text" placeholder="Region (e.g., ap-southeast-2)"/></div> <!></div> <div class="provider-section"><h3>Deepseek <span id="deepseek-status"> </span></h3> <div class="form-group"><input id="deepseek_api_key" type="text" placeholder="API Key (sk-...)"/></div> <!></div> <div class="provider-section"><h3>Gemini <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key"/></div> <!></div> <div class="provider-section"><h3>Groq <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (gsk_...)"/></div> <!></div> <div class="provider-section"><h3>OpenRouter <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (sk-or-v1-...)"/></div> <!></div></form>');function Vr(C,a){pe(a,!0);const s=()=>Y(vt,"$config",j),G=()=>Y(Lt,"$availableModels",j),u=()=>Y(rt,"$selectedModels",j),P=()=>Y(ze,"$configModalOpen",j),A=()=>Y(we,"$configLoading",j),[j,R]=Pe();let p=re(Ot({openai_api_key:"",bedrock_access_key_id:"",bedrock_secret_access_key:"",bedrock_session_token:"",bedrock_region:"ap-southeast-2",deepseek_api_key:"",gemini_api_key:"",groq_api_key:"",openrouter_api_key:""}));it(()=>{s()&&g(p,{openai_api_key:s().openai_api_key||"",bedrock_access_key_id:s().bedrock_access_key_id||"",bedrock_secret_access_key:s().bedrock_secret_access_key||"",bedrock_session_token:s().bedrock_session_token||"",bedrock_region:s().bedrock_region||"ap-southeast-2",deepseek_api_key:s().deepseek_api_key||"",gemini_api_key:s().gemini_api_key||"",groq_api_key:s().groq_api_key||"",openrouter_api_key:s().openrouter_api_key||""},!0)});function m(I){switch(I){case"openai":return!!s().openai_api_key;case"bedrock":return!!s().bedrock_access_key_id&&!!s().bedrock_secret_access_key;case"deepseek":return!!s().deepseek_api_key;case"gemini":return!!s().gemini_api_key;case"groq":return!!s().groq_api_key;case"openrouter":return!!s().openrouter_api_key;default:return!1}}async function J(I){I.preventDefault(),await sr(r(p))&&await st()}function c(I){return G().filter(N=>N.provider===I)}function v(I,N){const O=[...u().filter(M=>M.provider!==I),...N.filter(M=>M.provider===I)];rt.set(O)}lt(C,{id:"config-modal",get open(){return P()},title:"LLM Configuration",get onclose(){return Ie},footer:N=>{var E=Pr(),O=U(E);O.__click=function(...b){Ie==null||Ie.apply(this,b)};var M=o(O,2),B=t(M,!0);e(M),ae(()=>{M.disabled=A(),F(B,A()?"Saving...":"Save Configuration")}),i(N,E)},children:(N,E)=>{var O=Lr(),M=t(O),B=t(M),b=o(t(B));let y;var L=t(b,!0);e(b),e(B);var K=o(B,2),z=t(K);te(z),e(K);var d=o(K,2);{var _=l=>{var V=Mr(),Q=o(t(V),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("OpenAI",X),filterProvider:"OpenAI"}),e(V),i(l,V)};q(d,l=>{c("OpenAI").length>0&&l(_)})}e(M);var S=o(M,2),h=t(S),w=o(t(h));let D;var f=t(w,!0);e(w),e(h);var n=o(h,2),x=t(n);te(x),e(n);var W=o(n,2),T=t(W);te(T),e(W);var Z=o(W,2),se=t(Z);te(se),e(Z);var de=o(Z,2),ge=t(de);te(ge),e(de);var Le=o(de,2);{var Ve=l=>{var V=Sr(),Q=o(t(V),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("Bedrock",X),filterProvider:"Bedrock"}),e(V),i(l,V)};q(Le,l=>{c("Bedrock").length>0&&l(Ve)})}e(S);var ee=o(S,2),H=t(ee),le=o(t(H));let be;var he=t(le,!0);e(le),e(H);var ce=o(H,2),Me=t(ce);te(Me),e(ce);var Se=o(ce,2);{var Ae=l=>{var V=Cr(),Q=o(t(V),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("Deepseek",X),filterProvider:"Deepseek"}),e(V),i(l,V)};q(Se,l=>{c("Deepseek").length>0&&l(Ae)})}e(ee);var ue=o(ee,2),_e=t(ue),ke=o(t(_e));let me;var Ce=t(ke,!0);e(ke),e(_e);var Ee=o(_e,2),Qe=t(Ee);te(Qe),e(Ee);var ut=o(Ee,2);{var _t=l=>{var V=Ir(),Q=o(t(V),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("Gemini",X),filterProvider:"Gemini"}),e(V),i(l,V)};q(ut,l=>{c("Gemini").length>0&&l(_t)})}e(ue);var Ge=o(ue,2),De=t(Ge),qe=o(t(De));let Xe;var mt=t(qe,!0);e(qe),e(De);var je=o(De,2),Ye=t(je);te(Ye),e(je);var ft=o(je,2);{var gt=l=>{var V=Nr(),Q=o(t(V),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("Groq",X),filterProvider:"Groq"}),e(V),i(l,V)};q(ft,l=>{c("Groq").length>0&&l(gt)})}e(Ge);var Ze=o(Ge,2),Be=t(Ze),Ke=o(t(Be));let $e;var bt=t(Ke,!0);e(Ke),e(Be);var Re=o(Be,2),et=t(Re);te(et),e(Re);var ht=o(Re,2);{var kt=l=>{var V=Or(),Q=o(t(V),2);fe(Q,{get selectedModels(){return u()},onchange:X=>v("OpenRouter",X),filterProvider:"OpenRouter"}),e(V),i(l,V)};q(ht,l=>{c("OpenRouter").length>0&&l(kt)})}e(Ze),e(O),ae((l,V,Q,X,yt,wt,xt,Pt,Mt,St,Ct,It)=>{y=oe(b,1,"status-badge",null,y,l),F(L,V),D=oe(w,1,"status-badge",null,D,Q),F(f,X),be=oe(le,1,"status-badge",null,be,yt),F(he,wt),me=oe(ke,1,"status-badge",null,me,xt),F(Ce,Pt),Xe=oe(qe,1,"status-badge",null,Xe,Mt),F(mt,St),$e=oe(Ke,1,"status-badge",null,$e,Ct),F(bt,It)},[()=>({configured:m("openai"),"not-configured":!m("openai")}),()=>m("openai")?"Configured":"Not configured",()=>({configured:m("bedrock"),"not-configured":!m("bedrock")}),()=>m("bedrock")?"Configured":"Not configured",()=>({configured:m("deepseek"),"not-configured":!m("deepseek")}),()=>m("deepseek")?"Configured":"Not configured",()=>({configured:m("gemini"),"not-configured":!m("gemini")}),()=>m("gemini")?"Configured":"Not configured",()=>({configured:m("groq"),"not-configured":!m("groq")}),()=>m("groq")?"Configured":"Not configured",()=>({configured:m("openrouter"),"not-configured":!m("openrouter")}),()=>m("openrouter")?"Configured":"Not configured"]),Ue("submit",O,J),$(z,()=>r(p).openai_api_key,l=>r(p).openai_api_key=l),$(x,()=>r(p).bedrock_access_key_id,l=>r(p).bedrock_access_key_id=l),$(T,()=>r(p).bedrock_secret_access_key,l=>r(p).bedrock_secret_access_key=l),$(se,()=>r(p).bedrock_session_token,l=>r(p).bedrock_session_token=l),$(ge,()=>r(p).bedrock_region,l=>r(p).bedrock_region=l),$(Me,()=>r(p).deepseek_api_key,l=>r(p).deepseek_api_key=l),$(Qe,()=>r(p).gemini_api_key,l=>r(p).gemini_api_key=l),$(Ye,()=>r(p).groq_api_key,l=>r(p).groq_api_key=l),$(et,()=>r(p).openrouter_api_key,l=>r(p).openrouter_api_key=l),i(N,O)},$$slots:{footer:!0,default:!0}}),ve(),R()}xe(["click"]);var Ar=k('<span class="badge badge-version"> </span>'),Er=k('<button type="button" class="secondary">Close</button>'),Gr=k('<button type="button" class="secondary">Cancel</button> <button type="submit" form="new-prompt-form"><!></button>',1),Dr=k('<div class="form-group"><label>Expected Output Schema</label> <pre class="view-prompt-content"> </pre></div>'),qr=k('<div class="form-group"><label>Prompt Content</label> <pre class="view-prompt-content"> </pre></div> <!>',1),jr=k('<div class="form-group"><label for="new-prompt-name">Prompt Name</label> <input type="text" id="new-prompt-name" placeholder="e.g., extract-entities" required/></div>'),Br=k("<small>Saving will create a new version of this prompt</small>"),Kr=k('<form id="new-prompt-form"><!> <div class="form-group"><label for="new-prompt-content">Prompt Content</label> <textarea id="new-prompt-content" class="tall" placeholder="Enter your system prompt here..." required></textarea> <!></div> <div class="form-group"><label for="prompt-schema">Expected Output Schema (JSON)</label> <textarea id="prompt-schema" class="medium"></textarea> <small>Optional. JSON Schema for structured LLM output (used with response_format).</small></div></form>');function Rr(C,a){pe(a,!0);let s=re(""),G=re(""),u=re(""),P=re(!1),A=re(null);it(()=>{a.open&&a.promptId&&(a.mode==="edit"||a.mode==="view")?j(a.promptId):a.open||(g(s,""),g(G,""),g(u,""),g(A,null))});async function j(c){g(P,!0);try{const v=await Yt(c);g(A,v,!0),g(s,v.name,!0),g(G,v.content,!0),g(u,v.expectedSchema||"",!0)}catch{ne("Error loading prompt")}finally{g(P,!1)}}function R(c){if(!c.trim())return!0;try{return JSON.parse(c),!0}catch{return!1}}async function p(c){if(c.preventDefault(),!r(s).trim()||!r(G).trim()){ne("Please fill in all required fields");return}if(r(u)&&!R(r(u))){ne("Expected output schema must be valid JSON");return}g(P,!0);try{a.mode==="new"?await Zt({name:r(s).trim(),content:r(G).trim(),expectedSchema:r(u).trim()||void 0})&&a.onclose():a.mode==="edit"&&a.promptId&&a.promptName&&await $t(a.promptId,a.promptName,r(G).trim(),r(u).trim()||void 0)&&a.onclose()}finally{g(P,!1)}}function m(c){try{return JSON.stringify(JSON.parse(c),null,2)}catch{return c}}const J=ye(()=>a.mode==="new"?"Create New Prompt":a.mode==="edit"?`Edit "${a.promptName}"`:a.promptName||"Prompt");{const c=N=>{var E=ie(),O=U(E);{var M=B=>{var b=Ar(),y=t(b);e(b),ae(()=>{var L;return F(y,`v${(a.promptVersion||((L=r(A))==null?void 0:L.version))??""}`)}),i(B,b)};q(O,B=>{var b;a.mode!=="new"&&(a.promptVersion||(b=r(A))!=null&&b.version)&&B(M)})}i(N,E)},v=N=>{var E=ie(),O=U(E);{var M=b=>{var y=Er();y.__click=function(...L){var K;(K=a.onclose)==null||K.apply(this,L)},i(b,y)},B=b=>{var y=Gr(),L=U(y);L.__click=function(...S){var h;(h=a.onclose)==null||h.apply(this,S)};var K=o(L,2),z=t(K);{var d=S=>{var h=Je("Saving...");i(S,h)},_=S=>{var h=ie(),w=U(h);{var D=n=>{var x=Je("Create Prompt");i(n,x)},f=n=>{var x=Je("Save as New Version");i(n,x)};q(w,n=>{a.mode==="new"?n(D):n(f,!1)},!0)}i(S,h)};q(z,S=>{r(P)?S(d):S(_,!1)})}e(K),ae(()=>K.disabled=r(P)),i(b,y)};q(O,b=>{a.mode==="view"?b(M):b(B,!1)})}i(N,E)};let I=ye(()=>a.mode==="view");lt(C,{id:"new-prompt-modal",get open(){return a.open},get title(){return r(J)},get wide(){return r(I)},get onclose(){return a.onclose},titleBadge:c,footer:v,children:(N,E)=>{var O=ie(),M=U(O);{var B=y=>{var L=qr(),K=U(L),z=o(t(K),2),d=t(z,!0);e(z),e(K);var _=o(K,2);{var S=h=>{var w=Dr(),D=o(t(w),2),f=t(D,!0);e(D),e(w),ae(n=>F(f,n),[()=>m(r(A).expectedSchema)]),i(h,w)};q(_,h=>{var w;(w=r(A))!=null&&w.expectedSchema&&h(S)})}ae(()=>{var h;return F(d,((h=r(A))==null?void 0:h.content)||"")}),i(y,L)},b=y=>{var L=Kr(),K=t(L);{var z=f=>{var n=jr(),x=o(t(n),2);te(x),e(n),$(x,()=>r(s),W=>g(s,W)),i(f,n)};q(K,f=>{a.mode==="new"&&f(z)})}var d=o(K,2),_=o(t(d),2);tt(_);var S=o(_,2);{var h=f=>{var n=Br();i(f,n)};q(S,f=>{a.mode==="edit"&&f(h)})}e(d);var w=o(d,2),D=o(t(w),2);tt(D),Ne(D,"placeholder",'{"type": "array", "items": {"type": "object", "properties": {"name": {"type": "string"}}}}'),nt(2),e(w),e(L),Ue("submit",L,p),$(_,()=>r(G),f=>g(G,f)),$(D,()=>r(u),f=>g(u,f)),i(y,L)};q(M,y=>{a.mode==="view"?y(B):y(b,!1)})}i(N,O)},$$slots:{titleBadge:!0,footer:!0,default:!0}})}ve()}xe(["click"]);var Jr=k("<div> </div>"),Tr=k('<div id="app-message"></div>');function Fr(C,a){pe(a,!1);const s=()=>Y(er,"$messages",G),[G,u]=Pe();ct();var P=ie(),A=U(P);{var j=R=>{var p=Tr();Oe(p,5,s,m=>m.id,(m,J)=>{var c=Jr(),v=t(c,!0);e(c),ae(()=>{oe(c,1,`message ${r(J).type??""}`),F(v,r(J).text)}),i(m,c)}),e(p),i(R,p)};q(A,R=>{s().length>0&&R(j)})}i(C,P),ve(),u()}var Hr=k('<div class="app-layout app-shell"><!> <!> <main class="app-pane app-pane-content" aria-label="Content"><!> <!></main></div> <!> <!>',1);function Ur(C,a){pe(a,!0);let s=re(!1),G=re("new"),u=re(void 0),P=re(void 0),A=re(void 0);function j(){g(G,"new"),g(u,void 0),g(P,void 0),g(A,void 0),g(s,!0)}function R(b,y,L){g(G,"view"),g(u,b,!0),g(P,y,!0),g(A,L,!0),g(s,!0)}function p(b,y){g(G,"edit"),g(u,b,!0),g(P,y,!0),g(A,void 0),g(s,!0)}function m(){g(s,!1)}At(async()=>{await Promise.all([pt(),Vt(),We()]),await tr()});var J=Hr(),c=U(J),v=t(c);cr(v,{});var I=o(v,2);xr(I,{onNewPrompt:j,onViewPrompt:R,onEditPrompt:p});var N=o(I,2),E=t(N);Fr(E,{});var O=o(E,2);dt(O,()=>a.children),e(N),e(c);var M=o(c,2);Vr(M,{});var B=o(M,2);Rr(B,{get mode(){return r(G)},get open(){return r(s)},onclose:m,get promptId(){return r(u)},get promptName(){return r(P)},get promptVersion(){return r(A)}}),i(C,J),ve()}function aa(C,a){Ur(C,{children:(s,G)=>{var u=ie(),P=U(u);dt(P,()=>a.children),i(s,u)},$$slots:{default:!0}})}export{aa as component,ra as universal};
