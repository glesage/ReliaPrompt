import{f as b,a as s,d as ct,c as se,t as He}from"../chunks/D5utmpKv.js";import{K as Qe,p as ve,c as t,a as ue,s as o,r as e,t as oe,h as r,D as ye,B as W,b6 as Kt,C as pt,y as ae,z as Rt,d as vt,A as g,E as it}from"../chunks/Oh1DGDXX.js";import{l as ut,M as _t,a as pe,s as lt,b as Jt,c as Tt,d as mt,i as Ft}from"../chunks/CNxsYyag.js";import{o as zt}from"../chunks/DQlnYJg7.js";import{i as ft}from"../chunks/DrQUBQhf.js";import{d as xe,s as T,e as Xe}from"../chunks/BlpmaeCE.js";import{w as Ht,a as ne,y as Ut,c as We,k as Oe,m as Wt,s as re,f as Ne,z as Qt,A as Xt,B as Yt,C as Zt,D as $t,E as er,F as tr,b as rr,G as dt,H as ar,I as or,J as nr,K as gt,r as ee,L as sr,M as ir,N as lr,d as Y,O as dr,P as cr,Q as pr,R as vr,S as ur}from"../chunks/DtvwsFTp.js";import{a as Pe,s as Z,i as q}from"../chunks/CfGrZS5K.js";import{s as _r}from"../chunks/By_w4uV2.js";const mr=!0,fr=!1,ma=Object.freeze(Object.defineProperty({__proto__:null,prerender:mr,ssr:fr},Symbol.toStringTag,{value:"Module"})),gr=()=>{const I=_r;return{page:{subscribe:I.page.subscribe},navigating:{subscribe:I.navigating.subscribe},updated:I.updated}},br={subscribe(I){return gr().page.subscribe(I)}},bt=Qe({}),Ye=Qe(!1),we=Qe(!1);async function Ze(){we.set(!0);try{const I=await Ht();bt.set(I)}catch{ne("Error loading configuration")}finally{we.set(!1)}}async function kr(I){we.set(!0);try{return await Ut(I),await Ze(),await ut(),We("Configuration saved successfully!"),!0}catch(a){return ne(a.message||"Failed to save configuration"),!1}finally{we.set(!1)}}function Ue(){Ye.set(!0),Ze()}function Ie(){Ye.set(!1)}var hr=b('<a><span class="rail-link-label"> </span></a>'),yr=b('<aside class="app-rail" aria-label="Primary"><a class="app-rail-brand" href="/test-cases" aria-label="Relia Prompt Home"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg></a> <nav class="app-rail-nav" aria-label="Sections"></nav> <div class="app-rail-footer"><button id="setup-btn" class="rail-btn" title="LLMs">LLMs</button></div></aside>');function wr(I,a){ve(a,!1);const i=()=>Z(br,"$page",G),[G,_]=Pe(),M=[{href:"/test-cases",label:"Test Cases"},{href:"/test-runs",label:"Test Runs"}];function E(J){return i().url.pathname===J||i().url.pathname.startsWith(J+"/")}ft();var B=yr(),R=o(t(B),2);Oe(R,5,()=>M,Wt,(J,p)=>{var u=hr();let N;var O=t(u),V=t(O,!0);e(O),e(u),oe((L,C)=>{N=re(u,1,"rail-link",null,N,L),Ne(u,"href",r(p).href),Ne(u,"aria-current",C),T(V,r(p).label)},[()=>({active:E(r(p).href)}),()=>E(r(p).href)?"page":void 0]),s(J,u)}),e(R);var c=o(R,2),v=t(c);v.__click=function(...J){Ue==null||Ue.apply(this,J)},e(c),e(B),s(I,B),ue(),_()}xe(["click"]);var xr=ct('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>'),Pr=ct('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>'),Mr=b('<div class="sidebar-versions-loading">Loading...</div>'),Cr=b('<div><div class="sidebar-version-info"><span class="badge badge-version"> </span> <span class="sidebar-version-date"> </span></div> <div class="sidebar-version-actions"><button class="sidebar-action-btn view version-view" title="View prompt"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button> <button class="sidebar-action-btn delete version-delete" title="Delete this version"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div></div>'),Sr=b('<button class="sidebar-new-version-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> <span>Create New Version</span></button>'),Ir=b("<!> <!>",1),Nr=b('<div><div class="sidebar-group-header"><span class="sidebar-expand-icon"><!></span> <div class="sidebar-group-info"><div class="sidebar-group-name"> </div> <div class="sidebar-group-meta"> </div></div> <div class="sidebar-group-actions"><button class="sidebar-action-btn view" title="View prompt"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button> <button class="sidebar-action-btn delete" title="Delete all versions"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div></div> <div class="sidebar-versions"><!></div></div>');function Or(I,a){ve(a,!0);const i=()=>Z(Yt,"$expandedGroups",M),G=()=>Z(Zt,"$versionsCache",M),_=()=>Z(rr,"$selectedPrompt",M),[M,E]=Pe(),B=ye(()=>i().has(a.group.promptGroupId)),R=ye(()=>G()[a.group.promptGroupId]||[]),c=ye(()=>r(R).length>0?r(R)[0]:null);async function v(l){l.target.closest(".sidebar-action-btn")||await Qt(a.group.promptGroupId,a.group.id)}async function J(l,x){x.target.closest(".version-delete")||await er(l.id)}async function p(){confirm(`Delete ALL versions of "${a.group.name}"? This will also delete all test cases. This cannot be undone.`)&&await Xt(a.group.id,a.group.promptGroupId)}async function u(l){confirm(`Delete version ${l.version} of "${l.name}"? Test cases will be preserved. This cannot be undone.`)&&await tr(l.id,l.promptGroupId)}var N=Nr();let O;var V=t(N);V.__click=v;var L=t(V),C=t(L);{var j=l=>{var x=xr();s(l,x)},k=l=>{var x=Pr();s(l,x)};q(C,l=>{r(B)?l(j):l(k,!1)})}e(L);var y=o(L,2),A=t(y),K=t(A,!0);e(A);var Q=o(A,2),d=t(Q);e(Q),e(y);var m=o(y,2),S=t(m);S.__click=()=>a.onViewPrompt(a.group.id,a.group.name);var h=o(S,2);h.__click=p,e(m),e(V);var w=o(V,2),D=t(w);{var f=l=>{var x=se(),X=W(x);{var F=ie=>{var de=Mr();s(ie,de)},$=ie=>{var de=Ir(),ge=W(de);Oe(ge,17,()=>r(R),te=>te.id,(te,z)=>{var le=Cr();let be;le.__click=fe=>J(r(z),fe);var ke=t(le),ce=t(ke),Me=t(ce);e(ce);var Ce=o(ce,2),Ee=t(Ce,!0);e(Ce),e(ke);var _e=o(ke,2),me=t(_e);me.__click=()=>a.onViewPrompt(r(z).id,r(z).name,r(z).version);var he=o(me,2);he.__click=()=>u(r(z)),e(_e),e(le),oe(fe=>{var Se;be=re(le,1,"sidebar-version-item",null,be,{active:((Se=_())==null?void 0:Se.id)===r(z).id}),T(Me,`v${r(z).version??""}`),T(Ee,fe)},[()=>$t(r(z).createdAt)]),s(te,le)});var Le=o(ge,2);{var Ae=te=>{var z=Sr();z.__click=()=>a.onEditPrompt(r(c).id,r(c).name),s(te,z)};q(Le,te=>{r(c)&&te(Ae)})}s(ie,de)};q(X,ie=>{r(R).length===0?ie(F):ie($,!1)})}s(l,x)};q(D,l=>{r(B)&&l(f)})}e(w),e(N),oe(()=>{O=re(N,1,"sidebar-group",null,O,{expanded:r(B)}),Ne(N,"data-group-id",a.group.promptGroupId),T(K,a.group.name),T(d,`${a.group.version??""} version${a.group.version>1?"s":""}`)}),s(I,N),ue(),E()}xe(["click"]);var Lr=b('<div class="sidebar-empty">Loading...</div>'),Ar=b('<div class="sidebar-empty">No matches.<br/>Try a different search.</div>'),Er=b('<div class="sidebar-empty">No prompts yet.<br/>Create your first one!</div>'),Vr=b('<aside class="app-pane app-pane-prompts" aria-label="Prompts"><div class="pane-header"><div class="pane-title">Prompts</div> <div class="pane-header-actions"><button class="btn btn-secondary btn-sm" title="Export all prompts">Export</button> <button class="btn btn-secondary btn-sm" title="Import prompts">Import</button> <button id="new-prompt-btn" class="btn btn-primary btn-sm">New</button></div></div> <div class="pane-search"><input id="prompt-filter" type="search" placeholder="Search prompts…" autocomplete="off"/> <div class="pane-search-hint">⌘K</div></div> <div class="pane-body"><div class="sidebar-list" id="sidebar-prompts"><!></div></div></aside>');function Gr(I,a){ve(a,!0);const i=()=>Z(dt,"$promptFilter",M),G=()=>Z(ir,"$promptsLoading",M),_=()=>Z(lr,"$filteredPromptGroups",M),[M,E]=Pe();function B(d){const m=d.target;dt.set(m.value)}function R(d){const m=d.target;(m.classList.contains("sidebar-list")||m.classList.contains("sidebar-empty"))&&ar()}function c(d){if((d.metaKey||d.ctrlKey)&&(d.key==="k"||d.key==="K")){d.preventDefault();const m=document.getElementById("prompt-filter");m==null||m.focus()}}async function v(){try{const d=await or(),m=JSON.stringify(d,null,2),S=new Blob([m],{type:"application/json"}),h=URL.createObjectURL(S),w=document.createElement("a");w.href=h,w.download=`prompts-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(h),We(`Exported ${d.length} prompt${d.length!==1?"s":""}`)}catch{ne("Error exporting prompts")}}async function J(){const d=document.createElement("input");d.type="file",d.accept="application/json",d.onchange=async m=>{var w;const S=m.target,h=(w=S==null?void 0:S.files)==null?void 0:w[0];if(h)try{const D=await h.text();let f;try{f=JSON.parse(D)}catch{ne("Invalid JSON file");return}if(!Array.isArray(f)){ne("JSON must be an array of prompts");return}for(let F=0;F<f.length;F++){const $=f[F];if(!$.name||!$.content){ne(`Prompt ${F+1} is missing required fields (name, content)`);return}}const l=f.length;if(!confirm(`Import ${l} prompt${l!==1?"s":""}? Prompts with existing names will be skipped.`))return;const x=await nr(f);let X=`Imported ${x.created} prompt${x.created!==1?"s":""}`;x.skipped>0&&(X+=`, skipped ${x.skipped} (already exist)`),We(X),await gt()}catch{ne("Error reading file")}},d.click()}var p=Vr();Xe("keydown",Kt,c);var u=t(p),N=o(t(u),2),O=t(N);O.__click=v;var V=o(O,2);V.__click=J;var L=o(V,2);L.__click=function(...d){var m;(m=a.onNewPrompt)==null||m.apply(this,d)},e(N),e(u);var C=o(u,2),j=t(C);ee(j),j.__input=B,pt(2),e(C);var k=o(C,2),y=t(k);y.__click=R;var A=t(y);{var K=d=>{var m=Lr();s(d,m)},Q=d=>{var m=se(),S=W(m);{var h=D=>{var f=se(),l=W(f);{var x=F=>{var $=Ar();s(F,$)},X=F=>{var $=Er();s(F,$)};q(l,F=>{i()?F(x):F(X,!1)})}s(D,f)},w=D=>{var f=se(),l=W(f);Oe(l,1,_,x=>x.promptGroupId,(x,X)=>{Or(x,{get group(){return r(X)},get onViewPrompt(){return a.onViewPrompt},get onEditPrompt(){return a.onEditPrompt}})}),s(D,f)};q(S,D=>{_().length===0?D(h):D(w,!1)},!0)}s(d,m)};q(A,d=>{G()?d(K):d(Q,!1)})}e(y),e(k),e(p),oe(()=>sr(j,i())),s(I,p),ue(),E()}xe(["click","input"]);var Dr=b('<button id="config-close-btn" type="button" class="secondary">Cancel</button> <button type="submit" form="config-form"> </button>',1),qr=b('<div class="form-group"><label>Models</label> <!></div>'),Br=b('<div class="form-group"><label>Models</label> <!></div>'),jr=b('<div class="form-group"><label>Models</label> <!></div>'),Kr=b('<div class="form-group"><label>Models</label> <!></div>'),Rr=b('<div class="form-group"><label>Models</label> <!></div>'),Jr=b('<div class="form-group"><label>Models</label> <!></div>'),Tr=b('<div class="form-group"><label>Models</label> <!></div>'),Fr=b('<form id="config-form"><div class="provider-section"><h3>OpenAI <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (sk-...)"/></div> <!></div> <div class="provider-section"><h3>AWS Bedrock <span> </span></h3> <div class="form-group"><input type="text" placeholder="Access Key ID (AKIA...)"/></div> <div class="form-group"><input type="text" placeholder="Secret Access Key"/></div> <div class="form-group"><input type="text" placeholder="Session Token (optional)"/></div> <div class="form-group"><input type="text" placeholder="Region (e.g., ap-southeast-2)"/></div> <!></div> <div class="provider-section"><h3>Cerebras <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (csk-...)"/></div> <!></div> <div class="provider-section"><h3>Deepseek <span id="deepseek-status"> </span></h3> <div class="form-group"><input id="deepseek_api_key" type="text" placeholder="API Key (sk-...)"/></div> <!></div> <div class="provider-section"><h3>Gemini <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key"/></div> <!></div> <div class="provider-section"><h3>Groq <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (gsk_...)"/></div> <!></div> <div class="provider-section"><h3>OpenRouter <span> </span></h3> <div class="form-group"><input type="text" placeholder="API Key (sk-or-v1-...)"/></div> <!></div></form>');function zr(I,a){ve(a,!0);const i=()=>Z(bt,"$config",B),G=()=>Z(Tt,"$availableModels",B),_=()=>Z(lt,"$selectedModels",B),M=()=>Z(Ye,"$configModalOpen",B),E=()=>Z(we,"$configLoading",B),[B,R]=Pe();let c=ae(Rt({openai_api_key:"",bedrock_access_key_id:"",bedrock_secret_access_key:"",bedrock_session_token:"",bedrock_region:"ap-southeast-2",cerebras_api_key:"",deepseek_api_key:"",gemini_api_key:"",groq_api_key:"",openrouter_api_key:""}));vt(()=>{i()&&g(c,{openai_api_key:i().openai_api_key||"",bedrock_access_key_id:i().bedrock_access_key_id||"",bedrock_secret_access_key:i().bedrock_secret_access_key||"",bedrock_session_token:i().bedrock_session_token||"",bedrock_region:i().bedrock_region||"ap-southeast-2",cerebras_api_key:i().cerebras_api_key||"",deepseek_api_key:i().deepseek_api_key||"",gemini_api_key:i().gemini_api_key||"",groq_api_key:i().groq_api_key||"",openrouter_api_key:i().openrouter_api_key||""},!0)});function v(N){switch(N){case"openai":return!!i().openai_api_key;case"bedrock":return!!i().bedrock_access_key_id&&!!i().bedrock_secret_access_key;case"cerebras":return!!i().cerebras_api_key;case"deepseek":return!!i().deepseek_api_key;case"gemini":return!!i().gemini_api_key;case"groq":return!!i().groq_api_key;case"openrouter":return!!i().openrouter_api_key;default:return!1}}async function J(N){N.preventDefault(),await kr(r(c))&&await ut()}function p(N){return G().filter(O=>O.provider===N)}function u(N,O){const L=[..._().filter(C=>C.provider!==N),...O.filter(C=>C.provider===N)];lt.set(L),Jt()}_t(I,{id:"config-modal",get open(){return M()},title:"LLM Configuration",get onclose(){return Ie},footer:O=>{var V=Dr(),L=W(V);L.__click=function(...k){Ie==null||Ie.apply(this,k)};var C=o(L,2),j=t(C,!0);e(C),oe(()=>{C.disabled=E(),T(j,E()?"Saving...":"Save Configuration")}),s(O,V)},children:(O,V)=>{var L=Fr(),C=t(L),j=t(C),k=o(t(j));let y;var A=t(k,!0);e(k),e(j);var K=o(j,2),Q=t(K);ee(Q),e(K);var d=o(K,2);{var m=n=>{var P=qr(),H=o(t(P),2);pe(H,{get selectedModels(){return _()},onchange:U=>u("OpenAI",U),filterProvider:"OpenAI"}),e(P),s(n,P)};q(d,n=>{p("OpenAI").length>0&&n(m)})}e(C);var S=o(C,2),h=t(S),w=o(t(h));let D;var f=t(w,!0);e(w),e(h);var l=o(h,2),x=t(l);ee(x),e(l);var X=o(l,2),F=t(X);ee(F),e(X);var $=o(X,2),ie=t($);ee(ie),e($);var de=o($,2),ge=t(de);ee(ge),e(de);var Le=o(de,2);{var Ae=n=>{var P=Br(),H=o(t(P),2);pe(H,{get selectedModels(){return _()},onchange:U=>u("Bedrock",U),filterProvider:"Bedrock"}),e(P),s(n,P)};q(Le,n=>{p("Bedrock").length>0&&n(Ae)})}e(S);var te=o(S,2),z=t(te),le=o(t(z));let be;var ke=t(le,!0);e(le),e(z);var ce=o(z,2),Me=t(ce);ee(Me),e(ce);var Ce=o(ce,2);{var Ee=n=>{var P=jr(),H=o(t(P),2);pe(H,{get selectedModels(){return _()},onchange:U=>u("Cerebras",U),filterProvider:"Cerebras"}),e(P),s(n,P)};q(Ce,n=>{p("Cerebras").length>0&&n(Ee)})}e(te);var _e=o(te,2),me=t(_e),he=o(t(me));let fe;var Se=t(he,!0);e(he),e(me);var Ve=o(me,2),$e=t(Ve);ee($e),e(Ve);var kt=o(Ve,2);{var ht=n=>{var P=Kr(),H=o(t(P),2);pe(H,{get selectedModels(){return _()},onchange:U=>u("Deepseek",U),filterProvider:"Deepseek"}),e(P),s(n,P)};q(kt,n=>{p("Deepseek").length>0&&n(ht)})}e(_e);var Ge=o(_e,2),De=t(Ge),qe=o(t(De));let et;var yt=t(qe,!0);e(qe),e(De);var Be=o(De,2),tt=t(Be);ee(tt),e(Be);var wt=o(Be,2);{var xt=n=>{var P=Rr(),H=o(t(P),2);pe(H,{get selectedModels(){return _()},onchange:U=>u("Gemini",U),filterProvider:"Gemini"}),e(P),s(n,P)};q(wt,n=>{p("Gemini").length>0&&n(xt)})}e(Ge);var je=o(Ge,2),Ke=t(je),Re=o(t(Ke));let rt;var Pt=t(Re,!0);e(Re),e(Ke);var Je=o(Ke,2),at=t(Je);ee(at),e(Je);var Mt=o(Je,2);{var Ct=n=>{var P=Jr(),H=o(t(P),2);pe(H,{get selectedModels(){return _()},onchange:U=>u("Groq",U),filterProvider:"Groq"}),e(P),s(n,P)};q(Mt,n=>{p("Groq").length>0&&n(Ct)})}e(je);var ot=o(je,2),Te=t(ot),Fe=o(t(Te));let nt;var St=t(Fe,!0);e(Fe),e(Te);var ze=o(Te,2),st=t(ze);ee(st),e(ze);var It=o(ze,2);{var Nt=n=>{var P=Tr(),H=o(t(P),2);pe(H,{get selectedModels(){return _()},onchange:U=>u("OpenRouter",U),filterProvider:"OpenRouter"}),e(P),s(n,P)};q(It,n=>{p("OpenRouter").length>0&&n(Nt)})}e(ot),e(L),oe((n,P,H,U,Ot,Lt,At,Et,Vt,Gt,Dt,qt,Bt,jt)=>{y=re(k,1,"status-badge",null,y,n),T(A,P),D=re(w,1,"status-badge",null,D,H),T(f,U),be=re(le,1,"status-badge",null,be,Ot),T(ke,Lt),fe=re(he,1,"status-badge",null,fe,At),T(Se,Et),et=re(qe,1,"status-badge",null,et,Vt),T(yt,Gt),rt=re(Re,1,"status-badge",null,rt,Dt),T(Pt,qt),nt=re(Fe,1,"status-badge",null,nt,Bt),T(St,jt)},[()=>({configured:v("openai"),"not-configured":!v("openai")}),()=>v("openai")?"Configured":"Not configured",()=>({configured:v("bedrock"),"not-configured":!v("bedrock")}),()=>v("bedrock")?"Configured":"Not configured",()=>({configured:v("cerebras"),"not-configured":!v("cerebras")}),()=>v("cerebras")?"Configured":"Not configured",()=>({configured:v("deepseek"),"not-configured":!v("deepseek")}),()=>v("deepseek")?"Configured":"Not configured",()=>({configured:v("gemini"),"not-configured":!v("gemini")}),()=>v("gemini")?"Configured":"Not configured",()=>({configured:v("groq"),"not-configured":!v("groq")}),()=>v("groq")?"Configured":"Not configured",()=>({configured:v("openrouter"),"not-configured":!v("openrouter")}),()=>v("openrouter")?"Configured":"Not configured"]),Xe("submit",L,J),Y(Q,()=>r(c).openai_api_key,n=>r(c).openai_api_key=n),Y(x,()=>r(c).bedrock_access_key_id,n=>r(c).bedrock_access_key_id=n),Y(F,()=>r(c).bedrock_secret_access_key,n=>r(c).bedrock_secret_access_key=n),Y(ie,()=>r(c).bedrock_session_token,n=>r(c).bedrock_session_token=n),Y(ge,()=>r(c).bedrock_region,n=>r(c).bedrock_region=n),Y(Me,()=>r(c).cerebras_api_key,n=>r(c).cerebras_api_key=n),Y($e,()=>r(c).deepseek_api_key,n=>r(c).deepseek_api_key=n),Y(tt,()=>r(c).gemini_api_key,n=>r(c).gemini_api_key=n),Y(at,()=>r(c).groq_api_key,n=>r(c).groq_api_key=n),Y(st,()=>r(c).openrouter_api_key,n=>r(c).openrouter_api_key=n),s(O,L)},$$slots:{footer:!0,default:!0}}),ue(),R()}xe(["click"]);var Hr=b('<span class="badge badge-version"> </span>'),Ur=b('<button type="button" class="secondary">Close</button>'),Wr=b('<button type="button" class="secondary">Cancel</button> <button type="submit" form="new-prompt-form"><!></button>',1),Qr=b('<div class="form-group"><label>Expected Output Schema</label> <pre class="view-prompt-content"> </pre></div>'),Xr=b('<div class="form-group"><label>Prompt Content</label> <pre class="view-prompt-content"> </pre></div> <!>',1),Yr=b('<div class="form-group"><label for="new-prompt-name">Prompt Name</label> <input type="text" id="new-prompt-name" placeholder="e.g., extract-entities" required/></div>'),Zr=b("<small>Saving will create a new version of this prompt</small>"),$r=b('<form id="new-prompt-form"><!> <div class="form-group"><label for="new-prompt-content">Prompt Content</label> <textarea id="new-prompt-content" class="tall" placeholder="Enter your system prompt here..." required></textarea> <!></div> <div class="form-group"><label for="prompt-schema">Expected Output Schema (JSON)</label> <textarea id="prompt-schema" class="medium"></textarea> <small>Optional. JSON Schema for structured LLM output (used with response_format).</small></div></form>');function ea(I,a){ve(a,!0);let i=ae(""),G=ae(""),_=ae(""),M=ae(!1),E=ae(null);vt(()=>{a.open&&a.promptId&&(a.mode==="edit"||a.mode==="view")?B(a.promptId):a.open||(g(i,""),g(G,""),g(_,""),g(E,null))});async function B(p){g(M,!0);try{const u=await dr(p);g(E,u,!0),g(i,u.name,!0),g(G,u.content,!0),g(_,u.expectedSchema||"",!0)}catch{ne("Error loading prompt")}finally{g(M,!1)}}function R(p){if(!p.trim())return!0;try{return JSON.parse(p),!0}catch{return!1}}async function c(p){if(p.preventDefault(),!r(i).trim()||!r(G).trim()){ne("Please fill in all required fields");return}if(r(_)&&!R(r(_))){ne("Expected output schema must be valid JSON");return}g(M,!0);try{a.mode==="new"?await cr({name:r(i).trim(),content:r(G).trim(),expectedSchema:r(_).trim()||void 0})&&a.onclose():a.mode==="edit"&&a.promptId&&a.promptName&&await pr(a.promptId,a.promptName,r(G).trim(),r(_).trim()||void 0)&&a.onclose()}finally{g(M,!1)}}function v(p){try{return JSON.stringify(JSON.parse(p),null,2)}catch{return p}}const J=ye(()=>a.mode==="new"?"Create New Prompt":a.mode==="edit"?`Edit "${a.promptName}"`:a.promptName||"Prompt");{const p=O=>{var V=se(),L=W(V);{var C=j=>{var k=Hr(),y=t(k);e(k),oe(()=>{var A;return T(y,`v${(a.promptVersion||((A=r(E))==null?void 0:A.version))??""}`)}),s(j,k)};q(L,j=>{var k;a.mode!=="new"&&(a.promptVersion||(k=r(E))!=null&&k.version)&&j(C)})}s(O,V)},u=O=>{var V=se(),L=W(V);{var C=k=>{var y=Ur();y.__click=function(...A){var K;(K=a.onclose)==null||K.apply(this,A)},s(k,y)},j=k=>{var y=Wr(),A=W(y);A.__click=function(...S){var h;(h=a.onclose)==null||h.apply(this,S)};var K=o(A,2),Q=t(K);{var d=S=>{var h=He("Saving...");s(S,h)},m=S=>{var h=se(),w=W(h);{var D=l=>{var x=He("Create Prompt");s(l,x)},f=l=>{var x=He("Save as New Version");s(l,x)};q(w,l=>{a.mode==="new"?l(D):l(f,!1)},!0)}s(S,h)};q(Q,S=>{r(M)?S(d):S(m,!1)})}e(K),oe(()=>K.disabled=r(M)),s(k,y)};q(L,k=>{a.mode==="view"?k(C):k(j,!1)})}s(O,V)};let N=ye(()=>a.mode==="view");_t(I,{id:"new-prompt-modal",get open(){return a.open},get title(){return r(J)},get wide(){return r(N)},get onclose(){return a.onclose},titleBadge:p,footer:u,children:(O,V)=>{var L=se(),C=W(L);{var j=y=>{var A=Xr(),K=W(A),Q=o(t(K),2),d=t(Q,!0);e(Q),e(K);var m=o(K,2);{var S=h=>{var w=Qr(),D=o(t(w),2),f=t(D,!0);e(D),e(w),oe(l=>T(f,l),[()=>v(r(E).expectedSchema)]),s(h,w)};q(m,h=>{var w;(w=r(E))!=null&&w.expectedSchema&&h(S)})}oe(()=>{var h;return T(d,((h=r(E))==null?void 0:h.content)||"")}),s(y,A)},k=y=>{var A=$r(),K=t(A);{var Q=f=>{var l=Yr(),x=o(t(l),2);ee(x),e(l),Y(x,()=>r(i),X=>g(i,X)),s(f,l)};q(K,f=>{a.mode==="new"&&f(Q)})}var d=o(K,2),m=o(t(d),2);it(m);var S=o(m,2);{var h=f=>{var l=Zr();s(f,l)};q(S,f=>{a.mode==="edit"&&f(h)})}e(d);var w=o(d,2),D=o(t(w),2);it(D),Ne(D,"placeholder",'{"type": "array", "items": {"type": "object", "properties": {"name": {"type": "string"}}}}'),pt(2),e(w),e(A),Xe("submit",A,c),Y(m,()=>r(G),f=>g(G,f)),Y(D,()=>r(_),f=>g(_,f)),s(y,A)};q(C,y=>{a.mode==="view"?y(j):y(k,!1)})}s(O,L)},$$slots:{titleBadge:!0,footer:!0,default:!0}})}ue()}xe(["click"]);var ta=b("<div> </div>"),ra=b('<div id="app-message"></div>');function aa(I,a){ve(a,!1);const i=()=>Z(vr,"$messages",G),[G,_]=Pe();ft();var M=se(),E=W(M);{var B=R=>{var c=ra();Oe(c,5,i,v=>v.id,(v,J)=>{var p=ta(),u=t(p,!0);e(p),oe(()=>{re(p,1,`message ${r(J).type??""}`),T(u,r(J).text)}),s(v,p)}),e(c),s(R,c)};q(E,R=>{i().length>0&&R(B)})}s(I,M),ue(),_()}var oa=b('<div class="app-layout app-shell"><!> <!> <main class="app-pane app-pane-content" aria-label="Content"><!> <!></main></div> <!> <!>',1);function na(I,a){ve(a,!0);let i=ae(!1),G=ae("new"),_=ae(void 0),M=ae(void 0),E=ae(void 0);function B(){g(G,"new"),g(_,void 0),g(M,void 0),g(E,void 0),g(i,!0)}function R(k,y,A){g(G,"view"),g(_,k,!0),g(M,y,!0),g(E,A,!0),g(i,!0)}function c(k,y){g(G,"edit"),g(_,k,!0),g(M,y,!0),g(E,void 0),g(i,!0)}function v(){g(i,!1)}zt(async()=>{await Promise.all([gt(),Ft(),Ze()]),await ur()});var J=oa(),p=W(J),u=t(p);wr(u,{});var N=o(u,2);Gr(N,{onNewPrompt:B,onViewPrompt:R,onEditPrompt:c});var O=o(N,2),V=t(O);aa(V,{});var L=o(V,2);mt(L,()=>a.children),e(O),e(p);var C=o(p,2);zr(C,{});var j=o(C,2);ea(j,{get mode(){return r(G)},get open(){return r(i)},onclose:v,get promptId(){return r(_)},get promptName(){return r(M)},get promptVersion(){return r(E)}}),s(I,J),ue()}function fa(I,a){na(I,{children:(i,G)=>{var _=se(),M=W(_);mt(M,()=>a.children),s(i,_)},$$slots:{default:!0}})}export{fa as component,ma as universal};
